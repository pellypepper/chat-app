(()=>{var e={};e.id=105,e.ids=[105],e.modules={1933:(e,t)=>{"use strict";function r(e){var t;let{config:r,src:n,width:a,quality:s}=e,l=s||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(n)+"&w="+a+"&q="+l+(n.startsWith("/_next/static/media/"),"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3567:(e,t,r)=>{"use strict";var n=r(43210),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useSyncExternalStore,l=n.useRef,i=n.useEffect,o=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,c){var u=l(null);if(null===u.current){var f={hasValue:!1,value:null};u.current=f}else f=u.current;var m=s(e,(u=o(function(){function e(e){if(!i){if(i=!0,s=e,e=n(e),void 0!==c&&f.hasValue){var t=f.value;if(c(t,e))return l=t}return l=e}if(t=l,a(s,e))return t;var r=n(e);return void 0!==c&&c(t,r)?(s=e,t):(s=e,l=r)}var s,l,i=!1,o=void 0===r?null:r;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,r,n,c]))[0],u[1]);return i(function(){f.hasValue=!0,f.value=m},[m]),d(m),m}},6491:(e,t,r)=>{Promise.resolve().then(r.bind(r,63144))},6895:(e,t,r)=>{"use strict";e.exports=r(3567)},8462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>rt});var n,a,s,l,i,o=r(60687),d=r(43210),c=r.t(d,2),u=r(26787),f=r(51060);f.A.defaults.withCredentials=!0,f.A.defaults.baseURL="https://chat-app-tk-blg.fly.dev";let m=(0,u.v)((e,t)=>({chats:[],messages:{},loading:!1,error:null,fetchChatsSummary:async()=>{e({loading:!0,error:null});try{let t=(await f.A.get("/message/message-list")).data.chats;e({chats:t,loading:!1})}catch(t){console.error("Error fetching chats:",t),e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},fetchMessages:async t=>{e({loading:!0,error:null});try{if(!t)return void e({loading:!1});let r=await f.A.get(`/message?chatId=${t}`);e(e=>({messages:{...e.messages,[t]:r.data.messages},loading:!1}))}catch(t){console.error("Error fetching messages:",t),e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},createChat:async(r,n="",a=!1)=>{e({loading:!0,error:null});try{let s=await f.A.post("/message/create-chat",{participantIds:r,name:n,isGroup:a});await t().fetchChatsSummary();let l=s.data.chat.id,i=t().chats.find(e=>e.id===l)||null;return e({loading:!1}),i}catch(t){return console.error("Error creating chat:",t),e({error:t instanceof Error?t.message:"Unknown error",loading:!1}),null}},sendMessage:async(t,r,n)=>{e({loading:!0,error:null});try{let a=new FormData;a.append("chatId",t.toString()),r&&a.append("content",r),n&&a.append("image",n);let s=await f.A.post("/message/send-message",a,{headers:{"Content-Type":"multipart/form-data"}});e(e=>({messages:{...e.messages,[t]:[...e.messages[t]||[],s.data.message]},loading:!1}))}catch(t){console.error("Error sending message:",t),e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},updateGroupChat:async(r,n,a=[],s=[])=>{e({loading:!0,error:null});try{await f.A.put(`/message/update-group/${r}`,{name:n,addUserIds:a,removeUserIds:s}),await t().fetchChatsSummary(),e({loading:!1})}catch(t){console.error("Error updating group chat:",t),e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},deleteMessageEveryone:async(t,r)=>{e({loading:!0,error:null});try{await f.A.delete(`/message/delete-user/${r}`),e(e=>({messages:{...e.messages,[t]:(e.messages[t]||[]).filter(e=>e.id!==r)},loading:!1}))}catch(t){console.error("Error deleting message for everyone:",t),e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},deleteChatEveryone:async t=>{e({loading:!0,error:null});try{await f.A.delete(`/message/delete-everyone/${t}`),e(e=>({chats:e.chats.filter(e=>e.id!==t),messages:Object.fromEntries(Object.entries(e.messages).filter(([e])=>Number(e)!==t)),loading:!1}))}catch(t){console.error("Error deleting chat for everyone:",t),e({error:t instanceof Error?t.message:"Unknown error",loading:!1})}},clearError:()=>e({error:null})}));var p=r(5137);f.A.defaults.withCredentials=!0,f.A.defaults.baseURL="https://chat-app-tk-blg.fly.dev";let h=(0,u.v)((e,t)=>({allUsers:[],friends:[],onlineFriends:[],searchResults:[],selectedFriend:null,loading:!1,error:null,fetchAllUsers:async()=>{e({loading:!0,error:null});try{let t=await f.A.get("/friend/all");e({allUsers:t.data.users,loading:!1})}catch(t){e({error:t instanceof Error?t.message:String(t),loading:!1})}},fetchFriends:async()=>{e({loading:!0,error:null});try{let t=await f.A.get("/friend/list");e({friends:t.data.friends,loading:!1})}catch(t){e({error:t instanceof Error?t.message:String(t),loading:!1})}},fetchOnlineFriends:async()=>{e({loading:!0,error:null});try{let t=await f.A.get("/friend/online");e({onlineFriends:t.data.online,loading:!1})}catch(t){e({error:t instanceof Error?t.message:String(t),loading:!1})}},fetchFriendDetails:async t=>{e({loading:!0,error:null});try{let r=(await f.A.get(`/friend/details/${t}`)).data.friend;return e({selectedFriend:r,loading:!1}),r}catch(t){e({error:t instanceof Error?t.message:String(t),loading:!1})}},clearSelectedFriend:()=>e({selectedFriend:null}),searchFriends:async t=>{if(!t.trim())return void e({searchResults:[]});e({loading:!0,error:null});try{let r=await f.A.get(`/friend/search?query=${encodeURIComponent(t)}`);e({searchResults:r.data.results,loading:!1})}catch(t){e({error:t instanceof Error?t.message:String(t),loading:!1})}},getUserSeen:async e=>{try{let{onlineFriends:r}=t();if(r.includes(e))return{status:"online",lastSeen:null};let n=await f.A.get(`/friend/status/${e}`);return{lastSeen:n.data.lastSeen,status:n.data.status}}catch{return{lastSeen:null,status:"offline"}}},getUserStatus:async e=>{let{onlineFriends:r}=t();return r.includes(e)?"online":"offline"},addFriend:async r=>{e({loading:!0,error:null});try{await f.A.post("/friend/add",{friendId:r},{headers:{"Content-Type":"application/json"}}),await t().fetchFriends(),await t().fetchOnlineFriends(),e({loading:!1})}catch(r){let t="Unknown error";r&&"object"==typeof r&&("response"in r&&"string"==typeof r.response?.data?.error?t=r.response.data.error:"message"in r&&"string"==typeof r.message&&(t=r.message)),e({error:t,loading:!1})}},removeFriend:async r=>{e({loading:!0,error:null});try{await f.A.post("/friend/remove",{friendId:r}),await t().fetchFriends(),await t().fetchOnlineFriends(),e({loading:!1})}catch(t){e({error:t instanceof Error?t.message:String(t),loading:!1})}},clearSearch:()=>e({searchResults:[]})}));var g=r(12644);f.A.defaults.withCredentials=!0,f.A.defaults.baseURL="https://chat-app-tk-blg.fly.dev";let x=(0,u.v)(e=>({stories:[],myStoryGroup:null,viewers:[],loading:!1,error:null,selectedStory:null,setSelectedStory:t=>e({selectedStory:t}),isUploadModalOpen:!1,setUploadModalOpen:t=>e({isUploadModalOpen:t}),fetchFriendStories:async()=>{e({loading:!0,error:null});try{let t=await f.A.get("/story/friends");e({stories:t.data.groupedStories,loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Failed to fetch stories",loading:!1})}},fetchMyStories:async()=>{e({loading:!0,error:null});try{let t=await f.A.get("/story/");console.log("My stories response:",t.data),e({myStoryGroup:t.data.userStories,loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Failed to fetch your stories",loading:!1})}},uploadStory:async t=>{e({loading:!0,error:null});try{await f.A.post("/story/upload",t),await Promise.all([x.getState().fetchFriendStories(),x.getState().fetchMyStories()])}catch(t){e({error:t instanceof Error?t.message:"Failed to upload story",loading:!1})}},markViewed:async e=>{try{await f.A.post(`/story/view/${e}`)}catch(e){console.error("Failed to mark as viewed",e)}},getStoryViewers:async t=>{e({loading:!0,error:null});try{let r=await f.A.get(`/story/view/${t}`),n=Array.isArray(r.data.viewers)?r.data.viewers:[];return e({viewers:n,loading:!1}),n}catch(t){return e({error:t instanceof Error?t.message:"Failed to fetch viewers",loading:!1,viewers:[]}),[]}},deleteStory:async t=>{e({loading:!0,error:null});try{await f.A.delete(`/story/${t}`),await Promise.all([x.getState().fetchFriendStories(),x.getState().fetchMyStories()]),e({loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Failed to delete story",loading:!1})}}}));var b=r(62688);let v=(0,b.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),y=(0,b.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),j=(0,b.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),w=(0,b.A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),N=(0,b.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),C=(0,b.A)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),S=(0,b.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),k=(0,b.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var E=r(31261),A=r.n(E);let P=()=>{let{uploadStory:e,setUploadModalOpen:t,myStoryGroup:r,fetchMyStories:n,getStoryViewers:a,loading:s,error:l,deleteStory:i}=x(),[c,u]=(0,d.useState)("view"),[f,m]=(0,d.useState)("text"),[p,h]=(0,d.useState)(""),[g,b]=(0,d.useState)(null),[E,P]=(0,d.useState)(null),[F,M]=(0,d.useState)(!1),O=(0,d.useRef)(null),[T,R]=(0,d.useState)({}),[D,_]=(0,d.useState)(!1),[L,I]=(0,d.useState)(null);(0,d.useEffect)(()=>{n()},[n]),(0,d.useEffect)(()=>{(async()=>{if(r&&r.stories){let e={};await Promise.all(r.stories.map(async t=>{let r=await a(t.id);e[t.id]=Array.isArray(r)?r:[]})),R(e)}})()},[r,a]);let z=e=>{b(e),P(URL.createObjectURL(e))},U=async()=>{if("text"===f&&!p.trim()||"image"===f&&!g)return;M(!0);let r=new FormData;r.append("type",f),"text"===f&&r.append("content",p),"image"===f&&g&&r.append("image",g);try{await e(r),t(!1),h(""),b(null),P(null)}catch(e){console.error("Upload failed:",e)}finally{M(!1)}},$=async e=>{await i(e),R(t=>{let r={...t};return delete r[e],r}),console.log("Delete story:",e)},G=e=>{let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/36e5);return r<1?"Just now":r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`},H=r?.stories||[],q=async e=>{let t=await a(e);R(r=>({...r,[e]:Array.isArray(t)?t:[]})),I(e),_(!0)};return(0,o.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-gray-900 rounded-2xl w-full max-w-md h-[600px] text-white relative overflow-hidden border border-gray-700",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,o.jsx)("h2",{className:"text-xl font-bold",children:"Your Stories"}),(0,o.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,o.jsx)(v,{size:20})})]}),(0,o.jsxs)("div",{className:"flex border-b border-gray-700",children:[(0,o.jsxs)("button",{onClick:()=>u("view"),className:`flex-1 px-6 py-3 text-sm font-medium transition-all ${"view"===c?"text-blue-400 border-b-2 border-blue-400 bg-blue-400/10":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,o.jsx)(y,{size:16,className:"inline mr-2"}),"View Stories"]}),(0,o.jsxs)("button",{onClick:()=>u("upload"),className:`flex-1 px-6 py-3 text-sm font-medium transition-all ${"upload"===c?"text-blue-400 border-b-2 border-blue-400 bg-blue-400/10":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,o.jsx)(j,{size:16,className:"inline mr-2"}),"Add Story"]})]}),(0,o.jsx)("div",{className:"flex-1 overflow-hidden",children:"view"===c?(0,o.jsx)("div",{className:"h-full overflow-y-auto p-6",children:s?(0,o.jsx)("p",{className:"text-center text-gray-400",children:"Loading..."}):l?(0,o.jsx)("p",{className:"text-center text-red-500",children:l}):0===H.length?(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,o.jsx)("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mb-4",children:(0,o.jsx)(w,{size:32,className:"text-gray-400"})}),(0,o.jsx)("p",{className:"text-gray-400 mb-2",children:"No stories yet"}),(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Share your first story with friends"}),(0,o.jsx)("button",{onClick:()=>u("upload"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full transition-all",children:"Create Story"})]}):(0,o.jsx)("div",{className:"space-y-4 overflow-y-auto max-h-[400px] scrollbar-thin",children:H.map(e=>(0,o.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-sm",children:"\uD83D\uDC64"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-sm",children:"Your Story"}),(0,o.jsx)("p",{className:"text-gray-400 text-xs",children:G(e.createdAt)})]})]}),(0,o.jsx)("button",{onClick:()=>$(e.id),className:"text-gray-400 hover:text-red-400 p-1 hover:bg-gray-700 rounded transition-all",children:(0,o.jsx)(N,{size:16})})]}),"text"===e.type?(0,o.jsx)("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg p-4 mb-3",children:(0,o.jsx)("p",{className:"text-white text-center font-medium",children:e.content})}):(0,o.jsx)("div",{className:"relative aspect-[3/4] rounded-lg overflow-hidden mb-3",children:(0,o.jsx)(A(),{src:e.content,fill:!0,alt:"Story",className:"object-cover"})}),(0,o.jsx)("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:(0,o.jsxs)("button",{onClick:()=>q(e.id),className:"flex items-center gap-1",children:[(0,o.jsx)(y,{size:14}),(0,o.jsxs)("span",{children:[T[e.id]?.length??0," views"]})]})})]},e.id))})}):(0,o.jsxs)("div",{className:"h-full flex flex-col p-6",children:[(0,o.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,o.jsxs)("button",{onClick:()=>{m("text"),b(null),P(null)},className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl transition-all ${"text"===f?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[(0,o.jsx)(C,{size:18}),(0,o.jsx)("span",{className:"font-medium",children:"Text"})]}),(0,o.jsxs)("button",{onClick:()=>{m("image"),h("")},className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl transition-all ${"image"===f?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[(0,o.jsx)(S,{size:18}),(0,o.jsx)("span",{className:"font-medium",children:"Image"})]})]}),(0,o.jsx)("div",{className:"flex-1 mb-6",children:"text"===f?(0,o.jsxs)("div",{className:"h-full",children:[(0,o.jsx)("textarea",{value:p,onChange:e=>h(e.target.value),className:"w-full h-full bg-gray-800 border border-gray-700 rounded-xl p-4 text-white placeholder-gray-400 resize-none focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Share what's on your mind...",maxLength:280}),(0,o.jsx)("div",{className:"flex justify-between items-center mt-2",children:(0,o.jsxs)("span",{className:"text-xs text-gray-400",children:[p.length,"/280 characters"]})})]}):(0,o.jsxs)("div",{className:"h-full",children:[(0,o.jsx)("input",{ref:O,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&z(t)},className:"hidden"}),E?(0,o.jsxs)("div",{className:"relative h-full rounded-xl overflow-hidden",children:[(0,o.jsx)(A(),{src:E,fill:!0,alt:"Preview",className:"object-cover"}),(0,o.jsx)("button",{onClick:()=>{b(null),P(null)},className:"absolute top-3 right-3 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-all",children:(0,o.jsx)(v,{size:16})})]}):(0,o.jsxs)("div",{onClick:()=>O.current?.click(),className:"h-full border-2 border-dashed border-gray-600 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-gray-500 hover:bg-gray-800/50 transition-all",children:[(0,o.jsx)(w,{size:48,className:"text-gray-400 mb-4"}),(0,o.jsx)("p",{className:"text-gray-400 font-medium mb-2",children:"Choose a photo"}),(0,o.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Tap to select an image from your device"})]})]})}),(0,o.jsx)("button",{onClick:U,disabled:F||"text"===f&&!p.trim()||"image"===f&&!g,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:F?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k,{size:20}),"Share Story"]})})]})}),D&&null!==L&&(0,o.jsx)("div",{className:"absolute inset-0 bg-black/90 z-20 flex items-end",children:(0,o.jsxs)("div",{className:"w-full max-w-md mx-auto bg-gray-900 rounded-t-3xl p-6 max-h-96 overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("h3",{className:"text-white font-semibold",children:["Viewed by ",T[L]?.length??0]}),(0,o.jsx)("button",{onClick:()=>_(!1),className:"text-white/70 hover:text-white p-1",children:(0,o.jsx)(v,{size:20})})]}),(0,o.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(T[L]||[]).map(e=>(0,o.jsx)("div",{className:"flex items-center justify-between",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-lg",children:[e.firstname?.[0]?.toUpperCase(),e.lastname?.[0]?.toUpperCase()]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-white font-medium text-sm",children:[e.firstname," ",e.lastname]}),(0,o.jsx)("p",{className:"text-gray-400 text-xs",children:new Date(e.viewedAt).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})},e.id)),0===(T[L]||[]).length&&(0,o.jsx)("div",{className:"text-center text-gray-400",children:"No viewers yet"})]})]})})]})})},F=(0,b.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),M=()=>{let{stories:e,fetchFriendStories:t,isUploadModalOpen:r,setUploadModalOpen:n,loading:a,error:s,markViewed:l}=x(),[i,c]=(0,d.useState)(null),[u,f]=(0,d.useState)(0),[m,p]=(0,d.useState)(0),[h,g]=(0,d.useState)(!1),[b,y]=(0,d.useState)(null);(0,d.useEffect)(()=>{(()=>{let e=localStorage.getItem("userId");y(e?Number(e):null)})()},[]),(0,d.useEffect)(()=>{t()},[t]),(0,d.useEffect)(()=>{if(!i||null===b)return;let t=i.stories[u],r=i.userId===b,n=e.some(e=>e.userId===i.userId);t&&t.id&&!r&&n&&(l(t.id),console.log("Story marked as viewed 1:",t.id))},[i,u,l,b,e]);let j=(0,d.useCallback)(()=>{i&&(u<i.stories.length-1?f(e=>e+1):(c(null),f(0)))},[i,u]);(0,d.useEffect)(()=>{if(!i)return;let e=setInterval(()=>{p(e=>e>=100?(j(),0):e+2)},100);return()=>clearInterval(e)},[i,u,j]),(0,d.useEffect)(()=>{p(0)},[u]);let w=()=>{u>0?f(e=>e-1):(c(null),f(0))},N=(e,t)=>{e/t<.5?w():j()},C=async e=>{await l(e.stories[0].id),c(e),f(0),p(0),g(!1)},S=i&&null!==b&&i.userId===b;return(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"Stories"}),a&&(0,o.jsx)("p",{className:"text-gray-400 text-sm",children:"Loading..."}),s&&(0,o.jsx)("p",{className:"text-red-400 text-sm",children:s}),(0,o.jsxs)("div",{className:"flex gap-5 overflow-x-auto pb-2",children:[(0,o.jsxs)("div",{className:"flex-shrink-0 text-center cursor-pointer group",onClick:()=>n(!0),children:[(0,o.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-2xl mb-1 bg-gradient-to-br from-gray-600 to-gray-700 border-2 border-dashed border-gray-500 group-hover:border-gray-400 transition-all duration-200",children:"\uD83D\uDCF7"}),(0,o.jsx)("p",{className:"text-xs text-gray-400 truncate w-20",children:"Your Story"})]}),e?.map(e=>{let t=function(e){return e.stories&&0!==e.stories.length?e.stories[e.stories.length-1]:null}(e);return(0,o.jsxs)("div",{className:"flex-shrink-0 text-center cursor-pointer group",onClick:()=>C(e),children:[(0,o.jsx)("div",{className:"w-20 h-20 rounded-full border-secondary border   p-0.5 mb-1 group-hover:scale-105 transition-transform duration-200 relative overflow-hidden",children:t&&"image"===t.type?(0,o.jsx)(A(),{src:t.content,alt:"Preview",fill:!0,className:"object-cover rounded-full"}):(0,o.jsxs)("div",{className:"w-full h-full rounded-full bg-gray-800 flex items-center justify-center text-2xl relative",children:["\uD83D\uDC64",t&&"text"===t.type&&(0,o.jsx)("span",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 text-xs text-white/80 bg-black/60 px-2 rounded",children:t.content.length>12?t.content.slice(0,12)+"...":t.content})]})}),(0,o.jsxs)("p",{className:"text-xs text-gray-400 truncate w-20 group-hover:text-gray-300 transition-colors",children:[e.firstname," ",e.lastname]})]},`story-${e.userId}`)})]}),i&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"relative w-full h-full max-w-md mx-auto bg-black",children:[(0,o.jsx)("div",{className:"absolute top-4 left-4 right-4 z-10 flex gap-1",children:i.stories.map((e,t)=>(0,o.jsx)("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:(0,o.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-100 ease-linear",style:{width:t<u?"100%":t===u?`${m}%`:"0%"}})},t))}),(0,o.jsxs)("div",{className:"absolute top-8 left-4 right-4 z-10 flex items-center justify-between pt-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 p-0.5",children:(0,o.jsx)("div",{className:"w-full h-full rounded-full bg-gray-800 flex items-center justify-center text-sm",children:"\uD83D\uDC64"})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-white font-medium text-sm",children:[i.firstname," ",i.lastname]}),(0,o.jsx)("p",{className:"text-white/70 text-xs",children:new Date(i.stories[u]?.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),(0,o.jsx)("button",{className:"text-white/80 hover:text-white p-2 hover:bg-white/10 rounded-full transition-all",onClick:()=>c(null),children:(0,o.jsx)(v,{size:20})})]}),(0,o.jsxs)("div",{className:"w-full h-full flex items-center justify-center cursor-pointer relative",onClick:e=>{let t=e.currentTarget.getBoundingClientRect();N(e.clientX-t.left,t.width)},children:[(0,o.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,o.jsx)("div",{className:"w-1/2 h-full"}),(0,o.jsx)("div",{className:"w-1/2 h-full"})]}),(()=>{let e=i.stories[u];return e?"text"===e.type?(0,o.jsx)("div",{className:"flex items-center justify-center h-full px-8",children:(0,o.jsx)("p",{className:"text-white text-xl text-center leading-relaxed font-medium",children:e.content})}):(0,o.jsx)("div",{className:"relative w-full h-full",children:(0,o.jsx)(A(),{src:e.content,fill:!0,alt:"Story",className:"object-cover",priority:!0})}):null})()]}),!S&&(0,o.jsx)("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:(0,o.jsx)("div",{className:"flex items-center justify-between",children:(0,o.jsx)("div",{className:"flex gap-2",children:(0,o.jsx)("button",{onClick:w,disabled:0===u,className:"text-white/80 hover:text-white disabled:text-white/30 p-2 hover:bg-white/10 rounded-full transition-all disabled:cursor-not-allowed",children:(0,o.jsx)(F,{size:20})})})})})]})}),r&&(0,o.jsx)(P,{})]})},O=({conversations:e,onChatSelect:t})=>(0,o.jsx)("div",{className:"",children:(0,o.jsx)("div",{className:"flex-1 overflow-x-hidden",children:e.map(e=>{let r=e?.name?.[0]?.toUpperCase()??"?";return(0,o.jsxs)("div",{onClick:()=>t(e.id),className:`flex p-4 justify-between items-center border-b border-gray-600 gap-3 hover:bg-gray-700/30 cursor-pointer transition-all duration-200 ${e.active?"bg-gray-700/50 border-r-4 border-blue-400":""}`,children:[(0,o.jsxs)("div",{className:"relative w-[45px] h-[45px] rounded-full bg-gradient-purple text-primary flex items-center justify-center font-semibold text-base",children:[e.avatar?(0,o.jsx)(A(),{width:80,height:80,src:e.avatar,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):r,e.online&&(0,o.jsx)("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-primary rounded-full"})]}),(0,o.jsxs)("div",{className:"flex-1 w-[200px]",children:[(0,o.jsx)("div",{className:"font-semibold text-primary",children:e.name}),(0,o.jsx)("div",{className:"text-sm text-gray-400 truncate",children:e.message})]}),(0,o.jsxs)("div",{className:"flex flex-col items-end gap-1 text-xs",children:[(0,o.jsx)("span",{className:"text-gray-400",children:e.time?new Date(e.time).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""}),e.unread>0&&(0,o.jsx)("span",{className:"bg-gradient-orange text-primary font-bold w-5 h-5 flex items-center justify-center rounded-full text-xs",children:e.unread})]})]},e.id)})})}),T=e=>{switch(e){case"online":return"bg-green-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},R=(e,t)=>{let{allUsers:r,friends:n,onlineFriends:a}=h.getState(),s=[];switch(e){case"online":s=r.filter(e=>a.includes(e.id));break;case"friends":s=n;break;default:s=r}return s.filter(e=>e.firstname.toLowerCase().includes(t.toLowerCase())||e.lastname.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase()))},D=({user:e,onMessage:t,onAdd:r,onRemove:n,isFriend:a,status:s})=>{let l=`${(e?.firstname?.[0]?.toUpperCase()||"")+(e?.lastname?.[0]?.toUpperCase()||"")}`;return(0,o.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-800/50 rounded-xl hover:bg-gray-800/70 transition-colors",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-gradient-purple rounded-full flex items-center justify-center text-primary font-semibold",children:e.profilePicture?(0,o.jsx)(A(),{width:80,height:80,src:e.profilePicture,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):l}),(0,o.jsx)("div",{className:`absolute bottom-0 right-0 w-3 h-3 ${T(s)} border-2 border-primary rounded-full`})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,o.jsx)("div",{className:"font-semibold text-primary",children:e.firstname}),(0,o.jsx)("div",{className:"flex flex-col gap-2",children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>t?.(e.id),className:"px-3 py-1 bg-[#58a6ff] text-primary  rounded-lg hover:bg-blue-700 transition-colors text-xs",children:"Message"}),n&&(0,o.jsx)("button",{onClick:()=>n(e.id),className:"px-3 py-1 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-xs",children:"Remove"})]}):r&&(0,o.jsx)("button",{onClick:()=>r(e.id),className:"px-3 py-1 bg-green-600 text-primary rounded-lg hover:bg-green-700 transition-colors text-xs",children:"Add Friend"})})]})]})},_=({activeTab:e,onTabChange:t})=>{let r=t=>`px-4 py-2 rounded-t-xl rounded-bl-xl cursor-pointer transition-colors duration-200 text-primary ${e===t?"bg-gradient-purple":"bg-grey hover:bg-[#21262d]"}`;return(0,o.jsx)("nav",{className:"bg-[#0d1117] border-b border-primary text-sm md:text-base",children:(0,o.jsxs)("ul",{className:"flex justify-between items-center px-3 py-2 gap-2",children:[(0,o.jsx)("li",{onClick:()=>t("all"),className:r("all"),children:"All Users"}),(0,o.jsx)("li",{onClick:()=>t("online"),className:r("online"),children:"Online Friends"}),(0,o.jsx)("li",{onClick:()=>t("friends"),className:r("friends"),children:"My Friends"})]})})},L=({value:e,onChange:t})=>(0,o.jsx)("div",{className:"px-5 pb-5",children:(0,o.jsx)("input",{className:"w-full px-4 py-3 bg-tertiary-bg border text-primary border-primary mt-3 h-[50px] rounded text-sm focus:outline-none focus:border-[#58a6ff] focus:ring-4 focus:ring-[#58a6ff]/20",type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search friends by name or email"})});var I=r(49680);let z=({onChatSelect:e})=>{let{allUsers:t,friends:r,loading:n,error:a,fetchFriends:s,fetchOnlineFriends:l,addFriend:i,removeFriend:c,searchFriends:u,clearSearch:f}=h(),{fetchChatsSummary:g,createChat:x}=m(),[b,v]=(0,d.useState)({}),y=m.getState().chats.map(e=>({...e,participants:e.participants.map(e=>({id:e.id,name:e.name??""})),lastMessage:null===e.lastMessage?void 0:e.lastMessage,lastMessageAt:null===e.lastMessageAt?void 0:e.lastMessageAt})),j=(0,p.n)(e=>e.user),[w,N]=(0,d.useState)("all"),[C,S]=(0,d.useState)(""),{socket:k}=(0,I.c)(),E=(0,d.useCallback)(()=>{let e=h.getState().onlineFriends,t=[];t=C.trim()?h.getState().searchResults:R(w,"");let r={};t.forEach(t=>{r[t.id]=e.includes(t.id)?"online":"offline"}),v(r)},[w,C]);(0,d.useEffect)(()=>{if(!j?.id||!k)return;let e=()=>{l(),E()};return k.on("user_online",e),k.on("user_offline",e),l(),()=>{k.off("user_online",e),k.off("user_offline",e)}},[j?.id,l,E,k]),(0,d.useEffect)(()=>{E()},[E]),(0,d.useEffect)(()=>{C.trim()?u(C):f()},[C,u,f]);let A=C.trim()?h.getState().searchResults:t,P=R(w,C).filter(e=>A.some(t=>t.id===e.id)),F=async e=>{await i(e),await s(),await l()},M=async e=>{await c(e),await s(),await l(),await g()},O=async t=>{try{if(!j?.id)throw Error("User not authenticated");let r=y.find(e=>{if(!Array.isArray(e.participants)||2!==e.participants.length)return!1;let r=e.participants.map(e=>e.id).sort(),n=[j.id,t].sort();return!e.isGroup&&r[0]===n[0]&&r[1]===n[1]});if(r)return void e(r.id,r);let n=await x([t],void 0,!1);if(n){let t={...n,participants:(n.participants||[]).map(e=>({id:e.id,name:e.name??e.firstname??e.lastname??""})),lastMessage:n.lastMessage??void 0,lastMessageAt:n.lastMessageAt??void 0};e(Number(t.id),t);return}await g(),setTimeout(()=>{let r=(m.getState().chats||[]).find(e=>Array.isArray(e.participants)&&e.participants.some(e=>e?.id===t));if(r){let t={...r,participants:r.participants.map(e=>({id:e.id,name:e.name??e.firstname??e.lastname??""})),lastMessage:r.lastMessage??void 0,lastMessageAt:r.lastMessageAt??void 0};e(t.id,t)}},100)}catch(e){console.error("Error in handleMessage:",e)}};return(0,o.jsxs)("div",{className:"flex flex-col h-full min-h-0 max-h-screen",children:[(0,o.jsx)(L,{value:C,onChange:S}),(0,o.jsx)(_,{activeTab:w,onTabChange:N}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto scrollbar-auto-hide p-4 space-y-3",children:[n&&(0,o.jsx)("div",{className:"text-center text-gray-400",children:"Loading..."}),a&&(0,o.jsx)("div",{className:"text-center text-red-500",children:a}),!n&&!a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-primary",children:"all"===w?"All Users (A–Z)":"online"===w?"Online Friends":"My Friends"}),(0,o.jsxs)("span",{className:"text-sm text-gray-400",children:[P.length," users"]})]}),P.length?P.map(e=>{let t=r.some(t=>t.id===e.id),n=b[e.id]||"offline";return(0,o.jsx)(D,{isFriend:t,user:e,status:n,onMessage:t?()=>O(e.id):void 0,onAdd:t?void 0:()=>F(e.id),onRemove:t?()=>M(e.id):void 0},e.id)}):(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"text-gray-400 mb-2",children:"No results found"}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:"Try adjusting your search or browse different categories"})]})]})]})]})},U=({size:e=24,color:t="currentColor"})=>(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:t,width:e,height:e,className:"cursor-pointer",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a4 4 0 00-4-4h-1m-8 6h5v-2a4 4 0 00-4-4H7m6-6a4 4 0 11-8 0 4 4 0 018 0zm6 0a4 4 0 11-8 0 4 4 0 018 0z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v8m4-4H8"})]});var $=r(16189),G=r(45141),H=r(1983);let q=({handleGroup:e,handleClick:t,onChatSelect:r})=>{let[n,a]=(0,d.useState)("Messages"),[s,l]=(0,d.useState)(!1),[i,c]=(0,d.useState)(!1),u=(0,$.useRouter)(),{logout:f,isLoading:h,user:x,error:b}=(0,p.n)(),{chats:v}=m(),y=async()=>{try{await f(),l(!0),setTimeout(()=>{u.push("/withNavpages")},2e3)}catch{c(!0)}};return(0,o.jsxs)("section",{className:" p-4 h-screen bg-primary-bg flex flex-col",children:[(0,o.jsxs)("div",{className:"flex justify-between p-5 items-center mb-4",children:[(0,o.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-icon text-primary flex items-center justify-center font-semibold",children:(x?.firstname?.[0]?.toUpperCase()||"")+(x?.lastname?.[0]?.toUpperCase()||"")}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("p",{onClick:t,className:"text-primary text-xl md:text-2xl cursor-pointer",children:"⚙️"}),(0,o.jsx)("p",{onClick:y,className:"text-primary text-xl md:text-2xl cursor-pointer",children:"⏻"})]})]}),(0,o.jsx)("nav",{className:"border-b border-primary",children:(0,o.jsx)("ul",{className:"flex justify-between items-center w-full relative",children:["Messages","Friends","Group"].map(e=>(0,o.jsx)("li",{className:"flex-1",children:(0,o.jsxs)("button",{onClick:()=>a(e),className:`w-full p-4 text-center transition-all duration-200 relative ${n===e?"text-primary font-semibold":"text-gray-400 hover:text-gray-300"}`,children:[e,n===e&&(0,o.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-purple rounded-full"})]})},e))})}),(0,o.jsxs)("section",{className:"flex-1 flex flex-col min-h-0",children:["Messages"===n&&(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,o.jsx)("div",{className:"p-4 flex-shrink-0",children:(0,o.jsx)(M,{})}),(0,o.jsx)("div",{className:"flex-1 border-t  border-primary overflow-y-auto scrollbar-auto-hide px-5",children:v.length>0?(0,o.jsx)(O,{onChatSelect:r,conversations:v.filter(e=>!e.isGroup).map(e=>{let t=e.participants.find(e=>e.profilePicture);return{id:Number(e.id),name:e.name,avatar:t?t.profilePicture:"",message:e.lastMessage||"",time:e.lastMessageAt||"",unread:0}})}):(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center mt-16 text-center text-secondary",children:[(0,o.jsxs)("svg",{width:64,height:64,viewBox:"0 0 64 64",fill:"none",className:"mb-4",children:[(0,o.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"#23272F"}),(0,o.jsx)("path",{d:"M22 28a10 10 0 0 1 20 0v4a10 10 0 0 1-20 0v-4Z",stroke:"#A855F7",strokeWidth:"2"}),(0,o.jsx)("circle",{cx:"26",cy:"32",r:"2",fill:"#58A6FF"}),(0,o.jsx)("circle",{cx:"38",cy:"32",r:"2",fill:"#58A6FF"}),(0,o.jsx)("rect",{x:"28",y:"38",width:"8",height:"2",rx:"1",fill:"#A855F7"})]}),(0,o.jsx)("h2",{className:"text-lg font-semibold text-primary mb-1",children:"No Conversations Yet"}),(0,o.jsx)("p",{className:"text-sm text-secondary max-w-xs",children:"Start a chat with your friends or contacts to see your conversations here."})]})})]}),"Friends"===n&&(0,o.jsx)("div",{className:"p-5",children:(0,o.jsx)(z,{onChatSelect:r})}),"Group"===n&&(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,o.jsx)("div",{className:"p-5 flex-shrink-0",children:(0,o.jsx)("div",{className:"p-2 mt-2 flex justify-center",children:(0,o.jsxs)("button",{onClick:e,className:"flex justify-center items-center gap-2 bg-gradient-purple text-primary font-semibold px-5 py-3 rounded-lg shadow-lg hover:brightness-110 transition duration-300 ease-in-out",children:[(0,o.jsx)(U,{size:24,color:"white"}),"Create Group"]})})}),(0,o.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-auto-hide px-5",children:v.length>0?(0,o.jsx)(O,{onChatSelect:r,conversations:v.filter(e=>e.isGroup).map(e=>({id:Number(e.id),name:e.name,avatar:"",message:e.lastMessage||"",time:e.lastMessageAt||"",unread:0}))}):(0,o.jsxs)("div",{className:"text-center text-gray-400",children:[(0,o.jsx)("p",{className:"text-lg font-semibold",children:"No Groups Available"}),(0,o.jsx)("p",{className:"text-sm",children:"Create or join a group to start chatting!"})]})})]})]}),h&&(0,o.jsx)("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black bg-opacity-60",children:(0,o.jsx)(g.H5,{})}),s&&(0,o.jsx)(G.A,{message:"Logout successful! Redirecting to homepage in 3 seconds...",handleTimeout:()=>{},url:"/withNavpages",tempState:null}),i&&(0,o.jsx)(H.A,{message:b||"Logout failed. Please try again.",handleTimeout:()=>{c(!1)}})]})};var B=r(28559);let W=({chat:e,handleUpdateOpen:t,onBack:r})=>{let{fetchMessages:n,messages:a,fetchChatsSummary:s,sendMessage:l,deleteChatEveryone:i,deleteMessageEveryone:c}=m(),u=(0,p.n)(e=>e.user),f=u?.id,{onlineFriends:g,getUserSeen:x}=h(),{socket:b}=(0,I.c)(),v=(0,d.useMemo)(()=>e&&a[e.id]||[],[e,a]),y=(0,d.useRef)(null),[j,w]=(0,d.useState)(""),[N,C]=(0,d.useState)(null),[S,k]=(0,d.useState)(!1),[E,P]=(0,d.useState)(null),F=e&&e.participants&&2===e.participants.length&&f?e.participants.find(e=>e.id!==f)?.id:null;(0,d.useEffect)(()=>{if(!b||!e?.id)return;let t=({message:t})=>{t&&e&&t.chatId===e.id&&n(e.id)};return b.on("new_message",t),b.emit("join_chat",e.id),n(e.id),()=>{b.emit("leave_chat",e.id),b.off("new_message",t)}},[e,n,b]),(0,d.useEffect)(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[v,e]);let[M,O]=(0,d.useState)("Offline"),[T,R]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let t=!0;return async function(){if(e&&e.participants&&2===e.participants.length&&F){let e=g.includes(F);if(R(e),e)O("Active now"),P(null);else try{let e=await x(F);t&&(P(e?.lastSeen??null),O(e?.lastSeen?`Last seen: ${function(e){if(!e)return"";let t=new Date(e),r=new Date().getTime()-t.getTime();return r<6e4?"just now":r<36e5?`${Math.floor(r/6e4)} min ago`:r<864e5?`${Math.floor(r/36e5)} hours ago`:t.toLocaleString()}(e.lastSeen)}`:"Offline"))}catch{t&&(P(null),O("Offline"))}}else e&&e.participants&&e.participants.length>2?(P(null),O(""),R(!1)):(O("Connecting..."),P(null))}(),()=>{t=!1}},[e,g,x,f,F]);let D=async()=>{if((j.trim()||N)&&e){k(!0);try{await l(e.id,j.trim()?j:void 0,N||void 0),await s(),w(""),C(null)}catch(e){}finally{k(!1)}}},_=async(e,t)=>{if(e&&t)try{await c(e,t)}catch(e){}},L=async e=>{if(e)try{await i(e),r()}catch(e){}},z=e=>{t(e)},U=e=>!!e&&"string"==typeof e&&(!!(e.includes("pelly-chat.s3.")&&/\.(jpg|jpeg|png|gif|webp)$/i.test(e))||/\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i.test(e)),$=(0,o.jsx)("div",{className:`absolute bottom-0 right-0 w-2 h-2 rounded-full border border-white ${T?"bg-green-500":"bg-gray-400"}`}),G={};return e&&e.participants&&e.participants.length>2&&e.participants.forEach(e=>{e.id!==f&&(G[e.id]=g.includes(e.id)?"online":"offline")}),(0,o.jsx)("div",{className:"p-4 ",children:(0,o.jsx)("div",{className:"flex flex-col flex-1 h-screen",children:e?(0,o.jsxs)("div",{className:"flex flex-col flex-1 h-screen",children:[(0,o.jsxs)("div",{className:"p-5 border-b border-primary flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("button",{onClick:r,className:"md:hidden text-xs text-primary mb-4",children:(0,o.jsx)(B.A,{className:"w-5 h-5 text-primary "})}),(0,o.jsxs)("div",{className:"relative w-8 h-8 rounded-full bg-gradient-purple flex items-center justify-center text-primary text-xs font-semibold",children:[e?.name?.[0]??"?",e&&e.participants&&2===e.participants.length&&$]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"mb-1 font-semibold text-primary",children:e?e.name:""}),(0,o.jsx)("div",{className:"text-secondary text-sm flex items-center gap-2",children:e&&e.participants&&2===e.participants.length?(0,o.jsxs)(o.Fragment,{children:[T?(0,o.jsx)("span",{className:"text-green-500",children:"Online"}):(0,o.jsx)("span",{className:"text-gray-400",children:M}),E&&!T&&(0,o.jsx)("span",{className:"text-xs text-gray-500"})]}):e&&e.participants&&e.participants.length>2?(0,o.jsx)("span",{className:"text-gray-400",children:"Group Chat"}):""})]})]}),(0,o.jsxs)("div",{className:"flex gap-3",children:[(0,o.jsx)("button",{onClick:()=>z(e),className:"w-10 h-10 rounded-full bg-tertiary-bg hover:bg-primary  text-secondary hover:text-primary flex items-center justify-center transition",children:"ℹ️"}),(0,o.jsx)("button",{className:"w-10 h-10 rounded-full bg-red-600 hover:bg-red-800 text-white flex items-center justify-center transition",title:"Delete Chat",onClick:()=>{e?.id!==void 0&&L(e.id)},children:"\uD83D\uDDD1️"})]})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-4 p-5 overflow-y-auto flex-1 scrollbar-hidden",children:[0===v.length&&(0,o.jsx)("div",{className:"text-secondary text-center mt-10",children:"No messages yet."}),v.map((t,r)=>{let n=t.senderId===f,a="image"===t.type||U(t.content),s=e?.participants?.find(e=>e.id===t.senderId),l=n?u?.firstname||"You":s?.name||"Unknown",i=n?u?.firstname?.[0]||"Y":s?.name?.[0]||"U",d=null;return e&&e.participants&&e.participants.length>2&&s&&s.id!==f&&(d="online"===G[s.id]?"Online":"Offline"),(0,o.jsxs)("div",{className:`flex gap-3 max-w-[70%] ${n?"self-start flex-row":"self-end flex-row-reverse"}`,children:[(0,o.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-semibold 
                  ${n?"bg-gradient-to-br from-[#58a6ff] to-[#a855f7]":"bg-gradient-to-br from-[#6366f1] to-[#8b5cf6]"} flex-shrink-0`,children:i}),(0,o.jsxs)("div",{className:"flex flex-col",children:[d&&(0,o.jsx)("div",{className:"text-xs mt-1 text-[#a3a3a3] text-right",children:d}),(0,o.jsx)("div",{className:`text-xs mb-1 ml-2 ${n?"text-[#7d8590] text-left":"text-[#7d8590] text-right"}`,children:l}),(0,o.jsxs)("div",{className:`px-4 py-3 rounded-xl relative group ${n?"bg-gradient-to-br from-[#58a6ff] to-[#a855f7] text-white rounded-bl-sm":"bg-[#21262d] border border-[#30363d] text-white rounded-br-sm"}`,children:[(0,o.jsx)("div",{children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A(),{src:t.content,alt:"sent image",width:320,height:240,className:"max-w-xs rounded-lg mb-1",style:{width:"auto",height:"auto",maxWidth:"20rem",maxHeight:"15rem"},unoptimized:!0,onError:e=>{let t=e.target;t.style.display="none",t.nextSibling instanceof HTMLElement&&(t.nextSibling.style.display="block")}}),(0,o.jsx)("span",{style:{display:"none"},children:t.content})]}):(0,o.jsx)("span",{children:t.content})}),(0,o.jsxs)("div",{className:`text-xs mt-2 ${n?"text-white/70":"text-[#7d8590]"}`,children:[t.createdAt?new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",n&&(0,o.jsx)("span",{className:"ml-2",children:"✓✓"})]}),(0,o.jsx)("div",{className:`absolute top-2 ${n?"left-2":"right-2"} opacity-0 group-hover:opacity-100 flex gap-2`,children:(0,o.jsx)("button",{title:"Delete for everyone",className:"text-xs px-2 py-1 bg-black/20 rounded hover:bg-red-600 hover:text-white transition-colors",onClick:()=>_(e.id,t.id),children:"\uD83D\uDDD1️"})})]})]})]},t.id||r)}),(0,o.jsx)("div",{ref:y})]}),(0,o.jsx)("div",{className:"p-5 border-t border-[#30363d]",children:(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),D()},className:"flex items-center gap-3 bg-[#21262d] border border-[#30363d] rounded-full px-5 py-3",children:[(0,o.jsx)("div",{className:"flex gap-2 text-[#7d8590]",children:(0,o.jsxs)("label",{className:"hover:text-[#58a6ff] transition cursor-pointer",children:["\uD83D\uDCCE",(0,o.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{e.target.files&&e.target.files[0]&&C(e.target.files[0])},disabled:S})]})}),(0,o.jsx)("input",{type:"text",placeholder:"Type your message...",className:"flex-1 bg-transparent text-primary focus:outline-none text-base placeholder-[#7d8590]",value:j,onChange:e=>w(e.target.value),disabled:S}),N&&(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(A(),{src:URL.createObjectURL(N),alt:"preview",width:40,height:40,className:"w-10 h-10 object-cover rounded-full mr-2"}),(0,o.jsx)("button",{type:"button",onClick:()=>C(null),className:"text-red-500 text-xs",children:"✕"})]}),(0,o.jsx)("button",{type:"submit",className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#58a6ff] to-[#a855f7] text-white hover:scale-110 transition",disabled:S||!j.trim()&&!N,title:"Send",children:"➤"})]})})]}):(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[(0,o.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#58a6ff] to-[#a855f7] flex items-center justify-center text-white text-4xl mb-4 shadow-lg",children:"\uD83D\uDCAC"}),(0,o.jsx)("h1",{className:"text-2xl font-semibold text-gradient-purple mb-2",children:"Select a chat"}),(0,o.jsx)("p",{className:"text-secondary text-sm max-w-xs",children:"Choose a conversation from the left panel to start messaging."})]})})})},V=({selectedChat:e,handleUpdateOpen:t,handleBack:r,handleGroup:n,handleChatSelect:a,handleClick:s})=>(0,o.jsx)("div",{className:"md:hidden overflow-hidden ",children:e?(0,o.jsx)(W,{chat:e,handleUpdateOpen:t,onBack:r}):(0,o.jsx)(q,{handleGroup:n,onChatSelect:a,handleClick:s})}),Y=({selectedChat:e,handleUpdateOpen:t,handleBack:r,handleGroup:n,handleChatSelect:a,handleClick:s})=>(0,o.jsxs)("div",{className:"hidden md:grid md:grid-cols-[30%_70%] overflow-hidden",children:[(0,o.jsx)("div",{className:"overflow-hidden",children:(0,o.jsx)(q,{handleGroup:n,onChatSelect:a,handleClick:s})}),(0,o.jsx)("div",{className:"overflow-hidden",children:(0,o.jsx)(W,{onBack:r,handleUpdateOpen:t,chat:e})})]});var X=r(24377);let K=()=>{let{getProfile:e,user:t,updateProfile:r,uploadProfilePicture:n,isLoading:a}=(0,X.K)(),[s,l]=(0,d.useState)(""),[i,c]=(0,d.useState)(""),[u,f]=(0,d.useState)(""),[p,g]=(0,d.useState)(null),{friends:x}=h(),b=(0,$.useRouter)(),{chats:v}=m();(0,d.useEffect)(()=>{(async()=>{await e()})()},[e]),(0,d.useEffect)(()=>{t&&(l(t.firstname),c(t.lastname),f(t.email),g(t.profilePicture||""))},[t]);let y=v.filter(e=>e.isGroup),j=async e=>{e.preventDefault();try{console.log("Updating profile with:",{firstName:s,lastName:i,email:u}),await r({firstname:s,lastname:i,email:u}),console.log("Profile updated successfully")}catch(e){console.error("Failed to update profile:",e),alert("Error updating profile. Please try again.")}},N=(0,d.useRef)(null),C=`${s?.[0]||""}${i?.[0]||""}`;return(0,o.jsxs)("div",{id:"profile",children:[(0,o.jsxs)("div",{className:"text-center  mb-6 pt-4",children:[(0,o.jsx)("h1",{className:"bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent text-3xl font-bold mb-2",children:"Profile"}),(0,o.jsx)("p",{className:"text-secondary",children:"Manage your personal information"})]}),(0,o.jsxs)("div",{className:"bg-[#161b22]/80 border border-primary rounded-2xl p-6 mb-4 relative overflow-hidden text-center backdrop-blur-lg",children:[(0,o.jsx)("div",{className:"absolute top-0 left-0 right-0 h-20 bg-gradient-purple opacity-10"}),(0,o.jsxs)("div",{className:"w-20 h-20 rounded-full border-4 border-blue-400 mx-auto bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-3xl text-white cursor-pointer overflow-hidden relative z-10",onClick:()=>{N.current?.click()},children:[(0,o.jsx)("input",{type:"file",accept:"image/*",ref:N,onChange:e=>{let t=e.target.files?.[0];t&&n(t)},className:"hidden"}),p?(0,o.jsx)(A(),{width:80,height:80,src:p,alt:"Profile",className:"w-full h-full object-cover"}):C,(0,o.jsx)("div",{className:"absolute bottom-0 z-[1000] right-1 bg-black/60 rounded-full p-1 flex items-center justify-center ",children:(0,o.jsx)(w,{className:"w-5 h-5 text-white"})})]}),(0,o.jsxs)("div",{className:"text-xl font-bold mt-2",children:[s," ",i]}),(0,o.jsxs)("div",{className:"flex justify-around pt-4 border-t border-primary",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-xl font-bold text-blue-400",children:x.length}),(0,o.jsx)("div",{className:"text-secondary text-sm",children:"Friends"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-xl font-bold text-blue-400",children:y.length}),(0,o.jsx)("div",{className:"text-secondary text-sm",children:"Groups"})]})]})]}),(0,o.jsxs)("form",{onSubmit:j,className:"bg-[#161b22]/80 border border-primary rounded-2xl p-6 mb-4 backdrop-blur-lg",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Edit Profile"}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block mb-2 font-medium",children:"First Name"}),(0,o.jsx)("input",{type:"text",className:"w-full p-3 bg-primary border border-primary rounded-lg text-base focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/10",value:s,onChange:e=>l(e.target.value),placeholder:"Enter your first name"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block mb-2 font-medium",children:"Last Name"}),(0,o.jsx)("input",{type:"text",className:"w-full p-3 bg-primary border border-primary rounded-lg text-base focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/10",value:i,onChange:e=>c(e.target.value),placeholder:"Enter your last name"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block mb-2 font-medium",children:"Email"}),(0,o.jsx)("input",{type:"email",className:"w-full p-3 bg-primary border border-primary rounded-lg text-base focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/10",value:u,onChange:e=>f(e.target.value),placeholder:"Enter your email"})]}),(0,o.jsxs)("button",{type:"button",onClick:()=>b.push("/change-password"),className:"w-full flex items-center justify-center gap-2 bg-gradient-purple text-primary py-2 px-6 rounded-lg font-semibold hover:translate-y-[-2px] hover:shadow-lg transition disabled:opacity-50",children:[(0,o.jsx)("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M3 8a5 5 0 1 1 9.584 1H16v2h-2v2h-2v-2H9v-2.416A5 5 0 0 1 3 8zm5-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"})}),"Change password"]}),(0,o.jsxs)("button",{type:"submit",disabled:a,className:"w-full mt-2 flex items-center justify-center gap-2 bg-gradient-purple text-primary py-2 px-6 rounded-lg font-semibold hover:translate-y-[-2px] hover:shadow-lg transition disabled:opacity-50",children:[(0,o.jsx)("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708L9.708 9H2.5A1.5 1.5 0 0 0 1 10.5v.5a.5.5 0 0 0 .5.5h.5a.5.5 0 0 1 .5.5v.5a.5.5 0 0 0 .5.5h.5a.5.5 0 0 1 .5.5v.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5V14h1.5a.5.5 0 0 0 .5-.5v-2.293L15.854 3.854a.5.5 0 0 0 0-.708l-3-3z"})}),a?"Saving...":"Save Changes"]})]})]})},Z=({handleClickOutside:e})=>{let t=h(e=>e.friends),{createChat:r,chats:n}=m(),a=t&&t.length>0?t:[],[s,l]=(0,d.useState)(""),[i,c]=(0,d.useState)([]),[u,f]=(0,d.useState)(!1),[p,x]=(0,d.useState)(!1),[b,v]=(0,d.useState)(!1),[y,j]=(0,d.useState)(!1),[w,N]=(0,d.useState)(""),C=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},S=async t=>{if(t.preventDefault(),s.trim()&&i.length>0){let t=s.trim(),a=i.length>=2;if(n.map(e=>e.name).includes(t)){N("A group with this name already exists. Please choose a different name."),j(!0),setTimeout(()=>j(!1),3e3);return}x(!0);try{await new Promise(e=>setTimeout(e,3e3));let n=await r(i,t,a);x(!1),n?(v(!0),setTimeout(()=>{v(!1),e()},2e3)):(N("Error creating group."),j(!0),setTimeout(()=>j(!1),3e3))}catch{x(!1),N("Error creating group."),j(!0),setTimeout(()=>j(!1),3e3)}}},k=a.filter(e=>i.includes(e.id)).map(e=>`${e.firstname} ${e.lastname}`);return(0,o.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(13, 17, 23, 0.8)"},onClick:e,children:[p&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50 rounded-lg",children:(0,o.jsx)(g.H5,{})}),b&&(0,o.jsx)(G.A,{message:"Group created!"}),y&&(0,o.jsx)(H.A,{message:w||"Error creating group."}),(0,o.jsx)("div",{className:"relative w-full bg-navbar-bg border-primary border max-w-md rounded-lg shadow-2xl backdrop-blur-sm",onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-2 bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(90deg, var(--gradient-blue, #58a6ff), var(--gradient-purple, #a855f7))"},children:"Create Group"}),(0,o.jsx)("p",{style:{color:"var(--text-secondary, #7d8590)"},className:"text-sm",children:"Start a new conversation with your team"})]}),(0,o.jsxs)("form",{onSubmit:S,className:"space-y-5",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"groupName",className:"block text-primary text-sm font-medium mb-2",children:"Group Name *"}),(0,o.jsx)("input",{type:"text",id:"groupName",name:"groupName",required:!0,value:s,onChange:e=>l(e.target.value),placeholder:"Enter group name...",className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-opacity-50 text-sm",style:{backgroundColor:"var(--tertiary-bg, #21262d)",borderColor:"var(--border, #30363d)",color:"var(--text-primary, #e6edf3)"},onFocus:e=>{e.target.style.borderColor="var(--gradient-blue, #58a6ff)",e.target.style.boxShadow="0 0 0 3px rgba(88, 166, 255, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--border, #30363d)",e.target.style.boxShadow="none"},disabled:p})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"friendsSelect",className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary, #e6edf3)"},children:"Add Friends *"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>f(!u),className:"w-full px-4 py-3 rounded-lg border transition-all duration-200 focus:outline-none text-sm text-left flex items-center justify-between",style:{backgroundColor:"var(--tertiary-bg, #21262d)",borderColor:i.length>0?"var(--gradient-blue, #58a6ff)":"var(--border, #30363d)",color:"var(--text-primary, #e6edf3)"},disabled:p,children:[(0,o.jsx)("div",{className:"flex-1",children:0===i.length?(0,o.jsx)("span",{style:{color:"var(--text-secondary, #7d8590)"},children:"Select friends to add..."}):(0,o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[k.slice(0,2).map((e,t)=>(0,o.jsx)("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"var(--overlay-light, rgba(88, 166, 255, 0.1))",color:"var(--gradient-blue, #58a6ff)"},children:e},t)),i.length>2&&(0,o.jsxs)("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"var(--overlay-purple, rgba(168, 85, 247, 0.1))",color:"var(--gradient-purple, #a855f7)"},children:["+",i.length-2," more"]})]})}),(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",className:`transition-transform duration-200 ${u?"rotate-180":""}`,style:{color:"var(--text-secondary, #7d8590)"},children:(0,o.jsx)("path",{d:"M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"})})]}),u&&(0,o.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 rounded-lg border shadow-2xl z-10 max-h-60 overflow-y-auto",style:{backgroundColor:"var(--secondary-bg, #161b22)",borderColor:"var(--border, #30363d)"},children:a.map(e=>(0,o.jsxs)("div",{onClick:()=>C(e.id),className:"flex items-center gap-3 px-4 py-3 cursor-pointer transition-all duration-150 first:rounded-t-lg last:rounded-b-lg",style:{backgroundColor:i.includes(e.id)?"var(--overlay-light, rgba(88, 166, 255, 0.1))":"transparent"},onMouseEnter:t=>{i.includes(e.id)||(t.target.style.backgroundColor="var(--active-bg, #1c2128)")},onMouseLeave:t=>{i.includes(e.id)||(t.target.style.backgroundColor="transparent")},children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium",style:{backgroundColor:i.includes(e.id)?"var(--gradient-blue, #58a6ff)":"var(--tertiary-bg, #21262d)",color:i.includes(e.id)?"white":"var(--text-secondary, #7d8590)"},children:e.firstname[0]+e.lastname[0]}),(0,o.jsx)("span",{className:"flex-1 text-sm",style:{color:"var(--text-primary, #e6edf3)"},children:e.firstname}),i.includes(e.id)&&(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{color:"var(--gradient-blue, #58a6ff)"},children:(0,o.jsx)("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})})]},e.id))})]})]}),(0,o.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,o.jsx)("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-lg border font-medium text-sm transition-all duration-200 hover:scale-[1.02]",style:{backgroundColor:"var(--tertiary-bg, #21262d)",borderColor:"var(--border, #30363d)",color:"var(--text-secondary, #7d8590)"},onMouseEnter:e=>{e.target.style.backgroundColor="var(--active-bg, #1c2128)"},onMouseLeave:e=>{e.target.style.backgroundColor="var(--tertiary-bg, #21262d)"},disabled:p,children:"Cancel"}),(0,o.jsxs)("button",{type:"submit",disabled:!s.trim()||0===i.length||p,className:"flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all duration-200 hover:scale-[1.02] relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",style:{background:!s.trim()||0===i.length||p?"var(--border, #30363d)":"linear-gradient(90deg, var(--gradient-blue, #58a6ff), var(--gradient-purple, #a855f7))",color:"var(--text-white, white)",border:"none"},children:[(0,o.jsx)("span",{className:"relative z-10",children:"Create Group"}),(0,o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r opacity-0 group-hover:opacity-20 transition-opacity duration-200",style:{backgroundImage:"linear-gradient(90deg, var(--gradient-purple, #a855f7), var(--gradient-orange, #f97316))"}})]})]})]})]})})]})},J=({handleClickOutside:e,onGroupUpdated:t,group:r})=>{let n=h(e=>e.friends),{chats:a,updateGroupChat:s}=m(),l=n??[],[i,c]=(0,d.useState)(r.name),[u,f]=(0,d.useState)(r.participants),[p,x]=(0,d.useState)(!1),[b,v]=(0,d.useState)(!1),[y,j]=(0,d.useState)(!1),[w,N]=(0,d.useState)(!1),[C,S]=(0,d.useState)(""),k=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},E=async n=>{if(console.log("Submitting group update...",r.id),n.preventDefault(),!i.trim()||u.length<2)return;console.log("Submitting group update:",i,u);let l=i.trim();if(a.some(e=>e.name===l&&e.id!==r.id)){S("A group with this name already exists."),N(!0),setTimeout(()=>N(!1),3e3);return}v(!0);try{await new Promise(e=>setTimeout(e,2e3));let n=r.participants,a=u.filter(e=>!n.includes(e)),i=n.filter(e=>!u.includes(e));await s(r.id,l,a,i),t({id:r.id,name:l,participants:u}),v(!1),j(!0),setTimeout(()=>{j(!1),e()},2e3)}catch{v(!1),S("Failed to update group."),N(!0),setTimeout(()=>N(!1),3e3)}},A=l.filter(e=>u.includes(e.id)).map(e=>`${e.firstname} ${e.lastname}`);return(0,o.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(13, 17, 23, 0.8)"},onClick:e,children:[y&&(0,o.jsx)(G.A,{message:"Group updated!"}),w&&(0,o.jsx)(H.A,{message:C}),b&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50 rounded-lg",children:(0,o.jsx)(g.H5,{})}),(0,o.jsx)("div",{className:"relative w-full bg-navbar-bg border-primary border max-w-md rounded-lg shadow-2xl backdrop-blur-sm",onClick:e=>e.stopPropagation(),children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-2 bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(90deg, var(--gradient-blue, #58a6ff), var(--gradient-purple, #a855f7))"},children:"Update Group"}),(0,o.jsx)("p",{style:{color:"var(--text-secondary, #7d8590)"},className:"text-sm",children:"Modify group name or members"})]}),(0,o.jsxs)("form",{onSubmit:E,className:"space-y-5",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"groupName",className:"block text-primary text-sm font-medium mb-2",children:"Group Name *"}),(0,o.jsx)("input",{type:"text",id:"groupName",required:!0,value:i,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 rounded-lg border text-sm",style:{backgroundColor:"var(--tertiary-bg, #21262d)",borderColor:"var(--border, #30363d)",color:"var(--text-primary, #e6edf3)"},onFocus:e=>{e.target.style.borderColor="var(--gradient-blue, #58a6ff)",e.target.style.boxShadow="0 0 0 3px rgba(88, 166, 255, 0.1)"},onBlur:e=>{e.target.style.borderColor="var(--border, #30363d)",e.target.style.boxShadow="none"},disabled:b})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"friendsSelect",className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Group Members *"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>x(!p),className:"w-full px-4 py-3 rounded-lg border text-sm text-left flex items-center justify-between",style:{backgroundColor:"var(--tertiary-bg)",borderColor:u.length>0?"var(--gradient-blue)":"var(--border)",color:"var(--text-primary)"},disabled:b,children:[(0,o.jsx)("div",{className:"flex-1",children:0===u.length?(0,o.jsx)("span",{style:{color:"var(--text-secondary)"},children:"Select friends to add..."}):(0,o.jsxs)("div",{className:"flex flex-wrap gap-1",children:[A.slice(0,2).map((e,t)=>(0,o.jsx)("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(88, 166, 255, 0.1)",color:"var(--gradient-blue)"},children:e},t)),u.length>2&&(0,o.jsxs)("span",{className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"rgba(168, 85, 247, 0.1)",color:"var(--gradient-purple)"},children:["+",u.length-2," more"]})]})}),(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:`transition-transform duration-200 ${p?"rotate-180":""}`,style:{color:"var(--text-secondary)"},children:(0,o.jsx)("path",{d:"M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"})})]}),p&&(0,o.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 rounded-lg border shadow-2xl z-[1000] max-h-60 overflow-y-auto",style:{backgroundColor:"var(--secondary-bg, #161b22)",borderColor:"var(--border, #30363d)"},children:l.map(e=>(0,o.jsxs)("div",{onClick:()=>k(e.id),className:"flex items-center gap-3 px-4 py-3 cursor-pointer transition-all",style:{backgroundColor:u.includes(e.id)?"rgba(88, 166, 255, 0.1)":"transparent"},children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium",style:{backgroundColor:u.includes(e.id)?"var(--gradient-blue)":"var(--tertiary-bg)",color:u.includes(e.id)?"white":"var(--text-secondary)"},children:e.firstname[0]+e.lastname[0]}),(0,o.jsx)("span",{className:"flex-1 text-sm",style:{color:"var(--text-primary)"},children:e.firstname}),u.includes(e.id)&&(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{color:"var(--gradient-blue)"},children:(0,o.jsx)("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})})]},e.id))})]})]}),(0,o.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,o.jsx)("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-lg border font-medium text-sm",style:{backgroundColor:"var(--tertiary-bg)",borderColor:"var(--border)",color:"var(--text-secondary)"},children:"Cancel"}),(0,o.jsxs)("button",{type:"submit",disabled:!i.trim()||u.length<2||b,className:"flex-1 py-3 px-4 rounded-lg font-medium text-sm relative overflow-hidden group",style:{background:!i.trim()||u.length<2||b?"var(--border)":"linear-gradient(90deg, var(--gradient-blue), var(--gradient-purple))",color:"white",border:"none",opacity:b?.5:1,cursor:b?"not-allowed":"pointer"},children:[(0,o.jsx)("span",{className:"relative z-10",children:"Update Group"}),(0,o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r opacity-0 group-hover:opacity-20 transition-opacity duration-200",style:{backgroundImage:"linear-gradient(90deg, var(--gradient-purple), var(--gradient-orange))"}})]})]})]})]})})]})};var Q=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Q||{}),ee=Object.defineProperty,et=(e,t,r)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,er=(e,t,r)=>(et(e,"symbol"!=typeof t?t+"":t,r),r);class en{constructor(){er(this,"current",this.detect()),er(this,"handoffState","pending"),er(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"server"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}}let ea=new en,es=(e,t)=>{ea.isServer?(0,d.useEffect)(e,t):(0,d.useLayoutEffect)(e,t)};function el(e){let t=(0,d.useRef)(e);return es(()=>{t.current=e},[e]),t}class ei extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}function eo(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function ed(){let e=[],t={addEventListener:(e,r,n,a)=>(e.addEventListener(r,n,a),t.add(()=>e.removeEventListener(r,n,a))),requestAnimationFrame(...e){let r=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(r))},nextFrame:(...e)=>t.requestAnimationFrame(()=>t.requestAnimationFrame(...e)),setTimeout(...e){let r=setTimeout(...e);return t.add(()=>clearTimeout(r))},microTask(...e){let r={current:!0};return eo(()=>{r.current&&e[0]()}),t.add(()=>{r.current=!1})},style(e,t,r){let n=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:r}),this.add(()=>{Object.assign(e.style,{[t]:n})})},group(e){let t=ed();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let r=e.indexOf(t);if(r>=0)for(let t of e.splice(r,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}var ec=Object.defineProperty,eu=(e,t,r)=>t in e?ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ef=(e,t,r)=>(eu(e,"symbol"!=typeof t?t+"":t,r),r),em=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},ep=(e,t,r)=>(em(e,t,"read from private field"),r?r.call(e):t.get(e)),eh=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},eg=(e,t,r,n)=>(em(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class ex{constructor(e){eh(this,n,{}),eh(this,a,new ei(()=>new Set)),eh(this,s,new Set),ef(this,"disposables",ed()),eg(this,n,e)}dispose(){this.disposables.dispose()}get state(){return ep(this,n)}subscribe(e,t){let r={selector:e,callback:t,current:e(ep(this,n))};return ep(this,s).add(r),this.disposables.add(()=>{ep(this,s).delete(r)})}on(e,t){return ep(this,a).get(e).add(t),this.disposables.add(()=>{ep(this,a).get(e).delete(t)})}send(e){let t=this.reduce(ep(this,n),e);if(t!==ep(this,n)){for(let e of(eg(this,n,t),ep(this,s))){let t=e.selector(ep(this,n));eb(e.current,t)||(e.current=t,e.callback(t))}for(let t of ep(this,a).get(e.type))t(ep(this,n),e)}}}function eb(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&ev(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&ev(e.entries(),t.entries()):!!(ey(e)&&ey(t))&&ev(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function ev(e,t){for(;;){let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}}function ey(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}function ej(e,t,...r){if(e in t){let n=t[e];return"function"==typeof n?n(...r):n}let n=Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ej),n}n=new WeakMap,a=new WeakMap,s=new WeakMap;var ew=Object.defineProperty,eN=(e,t,r)=>t in e?ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eC=(e,t,r)=>(eN(e,"symbol"!=typeof t?t+"":t,r),r),eS=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(eS||{});let ek={0(e,t){let r=t.id,n=e.stack,a=e.stack.indexOf(r);if(-1!==a){let t=e.stack.slice();return t.splice(a,1),t.push(r),n=t,{...e,stack:n}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(-1===n)return e;let a=e.stack.slice();return a.splice(n,1),{...e,stack:a}}};class eE extends ex{constructor(){super(...arguments),eC(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),eC(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}static new(){return new eE({stack:[]})}reduce(e,t){return ej(t.type,ek,e,t)}}let eA=new ei(()=>eE.new());var eP=r(6895);let eF=function(e){let t=el(e);return d.useCallback((...e)=>t.current(...e),[t])};function eM(e,t,r=eb){return(0,eP.useSyncExternalStoreWithSelector)(eF(t=>e.subscribe(eO,t)),eF(()=>e.state),eF(()=>e.state),eF(t),r)}function eO(e){return e}function eT(e,t){let r=(0,d.useId)(),n=eA.get(t),[a,s]=eM(n,(0,d.useCallback)(e=>[n.selectors.isTop(e,r),n.selectors.inStack(e,r)],[n,r]));return es(()=>{if(e)return n.actions.push(r),()=>n.actions.pop(r)},[n,e,r]),!!e&&(!s||a)}function eR(e){var t,r;return ea.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?null!=(r=null==(t=e.current)?void 0:t.ownerDocument)?r:document:null:document}let eD=new Map,e_=new Map;function eL(e){var t;let r=null!=(t=e_.get(e))?t:0;return e_.set(e,r+1),0!==r||(eD.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>(function(e){var t;let r=null!=(t=e_.get(e))?t:1;if(1===r?e_.delete(e):e_.set(e,r-1),1!==r)return;let n=eD.get(e);n&&(null===n["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,eD.delete(e))})(e)}function eI(e){return"object"==typeof e&&null!==e&&"nodeType"in e}function ez(e){return eI(e)&&"tagName"in e}function eU(e){return ez(e)&&"accessKey"in e}function e$(e){return ez(e)&&"tabIndex"in e}let eG=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),eH=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var eq=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(eq||{}),eB=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(eB||{}),eW=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(eW||{}),eV=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(eV||{}),eY=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(eY||{});function eX(e){null==e||e.focus({preventScroll:!0})}function eK(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:a=[]}={}){var s,l,i;let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,d=Array.isArray(e)?r?function(e,t=e=>e){return e.slice().sort((e,r)=>{let n=t(e),a=t(r);if(null===n||null===a)return 0;let s=n.compareDocumentPosition(a);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:64&t?function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(eH)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(eG)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);a.length>0&&d.length>1&&(d=d.filter(e=>!a.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),n=null!=n?n:o.activeElement;let c=(()=>{if(5&t)return 1;if(10&t)return -1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,d.indexOf(n))-1;if(4&t)return Math.max(0,d.indexOf(n))+1;if(8&t)return d.length-1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=32&t?{preventScroll:!0}:{},m=0,p=d.length,h;do{if(m>=p||m+p<=0)return 0;let e=u+m;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}null==(h=d[e])||h.focus(f),m+=c}while(h!==o.activeElement);return 6&t&&null!=(i=null==(l=null==(s=h)?void 0:s.matches)?void 0:l.call(s,"textarea,input"))&&i&&h.select(),2}function eZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function eJ(){return eZ()||/Android/gi.test(window.navigator.userAgent)}function eQ(...e){return(0,d.useMemo)(()=>eR(...e),[...e])}function e0(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}var e1=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(e1||{}),e2=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(e2||{});function e4(){let e,t,r=(e=(0,d.useRef)([]),t=(0,d.useCallback)(t=>{for(let r of e.current)null!=r&&("function"==typeof r?r(t):r.current=t)},[]),(...r)=>{if(!r.every(e=>null==e))return e.current=r,t});return(0,d.useCallback)(e=>(function({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:a,visible:s=!0,name:l,mergeRefs:i}){i=null!=i?i:e3;let o=e6(t,e);if(s)return e5(o,r,n,l,i);let d=null!=a?a:0;if(2&d){let{static:e=!1,...t}=o;if(e)return e5(t,r,n,l,i)}if(1&d){let{unmount:e=!0,...t}=o;return ej(+!e,{0:()=>null,1:()=>e5({...t,hidden:!0,style:{display:"none"}},r,n,l,i)})}return e5(o,r,n,l,i)})({mergeRefs:r,...e}),[r])}function e5(e,t={},r,n,a){let{as:s=r,children:l,refName:i="ref",...o}=e9(e,["unmount","static"]),c=void 0!==e.ref?{[i]:e.ref}:{},u="function"==typeof l?l(t):l;"className"in o&&o.className&&"function"==typeof o.className&&(o.className=o.className(t)),o["aria-labelledby"]&&o["aria-labelledby"]===o.id&&(o["aria-labelledby"]=void 0);let f={};if(t){let e=!1,r=[];for(let[n,a]of Object.entries(t))"boolean"==typeof a&&(e=!0),!0===a&&r.push(n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e)for(let e of(f["data-headlessui-state"]=r.join(" "),r))f[`data-${e}`]=""}if(s===d.Fragment&&(Object.keys(e7(o)).length>0||Object.keys(e7(f)).length>0))if(!(0,d.isValidElement)(u)||Array.isArray(u)&&u.length>1){if(Object.keys(e7(o)).length>0)throw Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(e7(o)).concat(Object.keys(e7(f))).map(e=>`  - ${e}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join(`
`)].join(`
`))}else{var m;let e=u.props,t=null==e?void 0:e.className,r="function"==typeof t?(...e)=>e0(t(...e),o.className):e0(t,o.className),n=e6(u.props,e7(e9(o,["ref"])));for(let e in f)e in n&&delete f[e];return(0,d.cloneElement)(u,Object.assign({},n,f,c,{ref:a((m=u,d.version.split(".")[0]>="19"?m.props.ref:m.ref),c.ref)},r?{className:r}:{}))}return(0,d.createElement)(s,Object.assign({},e9(o,["ref"]),s!==d.Fragment&&c,s!==d.Fragment&&f),u)}function e3(...e){return e.every(e=>null==e)?void 0:t=>{for(let r of e)null!=r&&("function"==typeof r?r(t):r.current=t)}}function e6(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},r={};for(let n of e)for(let e in n)e.startsWith("on")&&"function"==typeof n[e]?(null!=r[e]||(r[e]=[]),r[e].push(n[e])):t[e]=n[e];if(t.disabled||t["aria-disabled"])for(let e in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(e)&&(r[e]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let e in r)Object.assign(t,{[e](t,...n){for(let a of r[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;a(t,...n)}}});return t}function e8(e){var t;return Object.assign((0,d.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function e7(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function e9(e,t=[]){let r=Object.assign({},e);for(let e of t)e in r&&delete r[e];return r}var te=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(te||{});let tt=e8(function(e,t){var r;let{features:n=1,...a}=e,s={ref:t,"aria-hidden":(2&n)==2||(null!=(r=a["aria-hidden"])?r:void 0),hidden:(4&n)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&n)==4&&(2&n)!=2&&{display:"none"}}};return e4()({ourProps:s,theirProps:a,slot:{},defaultTag:"span",name:"Hidden"})}),tr=(0,d.createContext)(null);function tn({children:e,node:t}){let[r,n]=(0,d.useState)(null),a=ta(null!=t?t:r);return d.createElement(tr.Provider,{value:a},e,null===a&&d.createElement(tt,{features:te.Hidden,ref:e=>{var t,r;if(e){for(let a of null!=(r=null==(t=eR(e))?void 0:t.querySelectorAll("html > *, body > *"))?r:[])if(a!==document.body&&a!==document.head&&ez(a)&&null!=a&&a.contains(e)){n(a);break}}}}))}function ta(e=null){var t;return null!=(t=(0,d.useContext)(tr))?t:e}let ts=function(e,t){let r=e(),n=new Set;return{getSnapshot:()=>r,subscribe:e=>(n.add(e),()=>n.delete(e)),dispatch(e,...a){let s=t[e].call(r,...a);s&&(r=s,n.forEach(e=>e()))}}}(()=>new Map,{PUSH(e,t){var r;let n=null!=(r=this.get(e))?r:{doc:e,count:0,d:ed(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let n,a={doc:e,d:t,meta:function(e){let t={};for(let r of e)Object.assign(t,r(t));return t}(r)},s=[eZ()?{before({doc:e,d:t,meta:r}){function n(e){return r.containers.flatMap(e=>e()).some(t=>t.contains(e))}t.microTask(()=>{var r;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let r=ed();r.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>r.dispose()))}let a=null!=(r=window.scrollY)?r:window.pageYOffset,s=null;t.addEventListener(e,"click",t=>{if(e$(t.target))try{let r=t.target.closest("a");if(!r)return;let{hash:a}=new URL(r.href),l=e.querySelector(a);e$(l)&&!n(l)&&(s=l)}catch{}},!0),t.addEventListener(e,"touchstart",e=>{var r;if(e$(e.target)&&ez(r=e.target)&&"style"in r)if(n(e.target)){let r=e.target;for(;r.parentElement&&n(r.parentElement);)r=r.parentElement;t.style(r,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")}),t.addEventListener(e,"touchmove",e=>{if(e$(e.target)){var t;if(!(eU(t=e.target)&&"INPUT"===t.nodeName))if(n(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),t.add(()=>{var e;a!==(null!=(e=window.scrollY)?e:window.pageYOffset)&&window.scrollTo(0,a),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{},{before({doc:e}){var t;let r=e.documentElement;n=Math.max(0,(null!=(t=e.defaultView)?t:window).innerWidth-r.clientWidth)},after({doc:e,d:t}){let r=e.documentElement,a=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,n-a);t.style(r,"paddingRight",`${s}px`)}},{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];s.forEach(({before:e})=>null==e?void 0:e(a)),s.forEach(({after:e})=>null==e?void 0:e(a))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function tl(){let e,t=(e="undefined"==typeof document,"useSyncExternalStore"in c&&(0,c.useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)),[r,n]=d.useState(ea.isHandoffComplete);return r&&!1===ea.isHandoffComplete&&n(!1),d.useEffect(()=>{!0!==r&&n(!0)},[r]),d.useEffect(()=>ea.handoff(),[]),!t&&r}ts.subscribe(()=>{let e=ts.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let e="hidden"===t.get(r.doc),n=0!==r.count;(n&&!e||!n&&e)&&ts.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),0===r.count&&ts.dispatch("TEARDOWN",r)}});let ti=Symbol();function to(...e){let t=(0,d.useRef)(e),r=eF(e=>{for(let r of t.current)null!=r&&("function"==typeof r?r(e):r.current=e)});return e.every(e=>null==e||(null==e?void 0:e[ti]))?void 0:r}let td=(0,d.createContext)(()=>{});function tc({value:e,children:t}){return d.createElement(td.Provider,{value:e},t)}let tu=(0,d.createContext)(null);tu.displayName="OpenClosedContext";var tf=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(tf||{});function tm(){return(0,d.useContext)(tu)}function tp({value:e,children:t}){return d.createElement(tu.Provider,{value:e},t)}function th({children:e}){return d.createElement(tu.Provider,{value:null},e)}let tg=(0,d.createContext)(!1);function tx(e){return d.createElement(tg.Provider,{value:e.force},e.children)}let tb=(0,d.createContext)(void 0),tv=(0,d.createContext)(null);tv.displayName="DescriptionContext";let ty=Object.assign(e8(function(e,t){let r=(0,d.useId)(),n=(0,d.useContext)(tb),{id:a=`headlessui-description-${r}`,...s}=e,l=function e(){let t=(0,d.useContext)(tv);if(null===t){let t=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),i=to(t);es(()=>l.register(a),[a,l.register]);let o=n||!1,c=(0,d.useMemo)(()=>({...l.slot,disabled:o}),[l.slot,o]),u={ref:i,...l.props,id:a};return e4()({ourProps:u,theirProps:s,slot:c,defaultTag:"p",name:l.name||"Description"})}),{});function tj(){let[e]=(0,d.useState)(ed);return e}function tw(){let e=(0,d.useRef)(!1);return es(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function tN(e){eF(e),(0,d.useRef)(!1)}var tC=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(tC||{});function tS(e,t){(0,d.useRef)([]),eF(e)}let tk=[];function tE(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let r of e.current)ez(r.current)&&t.add(r.current);return t}var tA=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(tA||{});let tP=Object.assign(e8(function(e,t){let r,n=(0,d.useRef)(null),a=to(n,t),{initialFocus:s,initialFocusFallback:l,containers:i,features:o=15,...c}=e;tl()||(o=0);let u=eQ(n);!function(e,{ownerDocument:t}){let r=!!(8&e),n=function(e=!0){let t=(0,d.useRef)(tk.slice());return tS(([e],[r])=>{!0===r&&!1===e&&eo(()=>{t.current.splice(0)}),!1===r&&!0===e&&(t.current=tk.slice())},[e,tk,t]),eF(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(r);tS(()=>{r||(null==t?void 0:t.activeElement)===(null==t?void 0:t.body)&&eX(n())},[r]),tN(()=>{r&&eX(n())})}(o,{ownerDocument:u});let f=function(e,{ownerDocument:t,container:r,initialFocus:n,initialFocusFallback:a}){let s=(0,d.useRef)(null),l=eT(!!(1&e),"focus-trap#initial-focus"),i=tw();return tS(()=>{if(0===e)return;if(!l){null!=a&&a.current&&eX(a.current);return}let o=r.current;o&&eo(()=>{if(!i.current)return;let r=null==t?void 0:t.activeElement;if(null!=n&&n.current){if((null==n?void 0:n.current)===r){s.current=r;return}}else if(o.contains(r)){s.current=r;return}if(null!=n&&n.current)eX(n.current);else{if(16&e){if(eK(o,eq.First|eq.AutoFocus)!==eB.Error)return}else if(eK(o,eq.First)!==eB.Error)return;if(null!=a&&a.current&&(eX(a.current),(null==t?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=null==t?void 0:t.activeElement})},[a,l,e]),s}(o,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:l});!function(e,{ownerDocument:t,container:r,containers:n,previousActiveElement:a}){var s;let l=tw(),i=!!(4&e);null==t||t.defaultView,el(e=>{if(!i||!l.current)return;let t=tE(n);eU(r.current)&&t.add(r.current);let s=a.current;if(!s)return;let o=e.target;eU(o)?tF(t,o)?(a.current=o,eX(o)):(e.preventDefault(),e.stopPropagation(),eX(s)):eX(a.current)})}(o,{ownerDocument:u,container:n,containers:i,previousActiveElement:f});let m=(r=(0,d.useRef)(0),el(e=>{"Tab"===e.key&&(r.current=+!!e.shiftKey)}),r),p=eF(e=>{if(!eU(n.current))return;let t=n.current;ej(m.current,{[tC.Forwards]:()=>{eK(t,eq.First,{skipElements:[e.relatedTarget,l]})},[tC.Backwards]:()=>{eK(t,eq.Last,{skipElements:[e.relatedTarget,l]})}})}),h=eT(!!(2&o),"focus-trap#tab-lock"),g=tj(),x=(0,d.useRef)(!1),b=e4();return d.createElement(d.Fragment,null,h&&d.createElement(tt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:te.Focusable}),b({ourProps:{ref:a,onKeyDown(e){"Tab"==e.key&&(x.current=!0,g.requestAnimationFrame(()=>{x.current=!1}))},onBlur(e){if(!(4&o))return;let t=tE(i);eU(n.current)&&t.add(n.current);let r=e.relatedTarget;e$(r)&&"true"!==r.dataset.headlessuiFocusGuard&&(tF(t,r)||(x.current?eK(n.current,ej(m.current,{[tC.Forwards]:()=>eq.Next,[tC.Backwards]:()=>eq.Previous})|eq.WrapAround,{relativeTo:e.target}):e$(e.target)&&eX(e.target)))}},theirProps:c,defaultTag:"div",name:"FocusTrap"}),h&&d.createElement(tt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:te.Focusable}))}),{features:tA});function tF(e,t){for(let r of e)if(r.contains(t))return!0;return!1}var tM=r(51215);let tO=d.Fragment,tT=e8(function(e,t){let{ownerDocument:r=null,...n}=e,a=(0,d.useRef)(null),s=to(function(e,t=!0){return Object.assign(e,{[ti]:t})}(e=>{a.current=e}),t),l=eQ(a),i=null!=r?r:l,o=function(e){let t=(0,d.useContext)(tg),r=(0,d.useContext)(tD),[n,a]=(0,d.useState)(()=>{var n;if(!t&&null!==r)return null!=(n=r.current)?n:null;if(ea.isServer)return null;let a=null==e?void 0:e.getElementById("headlessui-portal-root");if(a)return a;if(null===e)return null;let s=e.createElement("div");return s.setAttribute("id","headlessui-portal-root"),e.body.appendChild(s)});return n}(i),[c]=(0,d.useState)(()=>{var e;return ea.isServer?null:null!=(e=null==i?void 0:i.createElement("div"))?e:null}),u=(0,d.useContext)(t_),f=tl();es(()=>{!o||!c||o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c))},[o,c]),es(()=>{if(c&&u)return u.register(c)},[u,c]),tN(()=>{var e;o&&c&&(eI(c)&&o.contains(c)&&o.removeChild(c),o.childNodes.length<=0&&(null==(e=o.parentElement)||e.removeChild(o)))});let m=e4();return f&&o&&c?(0,tM.createPortal)(m({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:tO,name:"Portal"}),c):null}),tR=d.Fragment,tD=(0,d.createContext)(null),t_=(0,d.createContext)(null),tL=e8(function(e,t){let r=to(t),{enabled:n=!0,ownerDocument:a,...s}=e,l=e4();return n?d.createElement(tT,{...s,ownerDocument:a,ref:r}):l({ourProps:{ref:r},theirProps:s,slot:{},defaultTag:tO,name:"Portal"})}),tI=e8(function(e,t){let{target:r,...n}=e,a={ref:to(t)},s=e4();return d.createElement(tD.Provider,{value:r},s({ourProps:a,theirProps:n,defaultTag:tR,name:"Popover.Group"}))}),tz=Object.assign(tL,{Group:tI});"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&(null==(l=null==process?void 0:process.env)?void 0:l.NODE_ENV)==="test"&&void 0===(null==(i=null==Element?void 0:Element.prototype)?void 0:i.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var tU=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(tU||{});function t$(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(t=e.as)?t:tV)!==d.Fragment||1===d.Children.count(e.children)}let tG=(0,d.createContext)(null);tG.displayName="TransitionContext";var tH=(e=>(e.Visible="visible",e.Hidden="hidden",e))(tH||{});let tq=(0,d.createContext)(null);function tB(e){return"children"in e?tB(e.children):e.current.filter(({el:e})=>null!==e.current).filter(({state:e})=>"visible"===e).length>0}function tW(e,t){let r=el(e),n=(0,d.useRef)([]),a=tw(),s=tj(),l=eF((e,t=e2.Hidden)=>{let l=n.current.findIndex(({el:t})=>t===e);-1!==l&&(ej(t,{[e2.Unmount](){n.current.splice(l,1)},[e2.Hidden](){n.current[l].state="hidden"}}),s.microTask(()=>{var e;!tB(n)&&a.current&&(null==(e=r.current)||e.call(r))}))}),i=eF(e=>{let t=n.current.find(({el:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):n.current.push({el:e,state:"visible"}),()=>l(e,e2.Unmount)}),o=(0,d.useRef)([]),c=(0,d.useRef)(Promise.resolve()),u=(0,d.useRef)({enter:[],leave:[]}),f=eF((e,r,n)=>{o.current.splice(0),t&&(t.chains.current[r]=t.chains.current[r].filter(([t])=>t!==e)),null==t||t.chains.current[r].push([e,new Promise(e=>{o.current.push(e)})]),null==t||t.chains.current[r].push([e,new Promise(e=>{Promise.all(u.current[r].map(([e,t])=>t)).then(()=>e())})]),"enter"===r?c.current=c.current.then(()=>null==t?void 0:t.wait.current).then(()=>n(r)):n(r)}),m=eF((e,t,r)=>{Promise.all(u.current[t].splice(0).map(([e,t])=>t)).then(()=>{var e;null==(e=o.current.shift())||e()}).then(()=>r(t))});return(0,d.useMemo)(()=>({children:n,register:i,unregister:l,onStart:f,onStop:m,wait:c,chains:u}),[i,l,n,f,m,u,c])}tq.displayName="NestingContext";let tV=d.Fragment,tY=e1.RenderStrategy,tX=e8(function(e,t){let{show:r,appear:n=!1,unmount:a=!0,...s}=e,l=(0,d.useRef)(null),i=to(...t$(e)?[l,t]:null===t?[]:[t]);tl();let o=tm();if(void 0===r&&null!==o&&(r=(o&tf.Open)===tf.Open),void 0===r)throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,u]=(0,d.useState)(r?"visible":"hidden"),f=tW(()=>{r||u("hidden")}),[m,p]=(0,d.useState)(!0),h=(0,d.useRef)([r]);es(()=>{!1!==m&&h.current[h.current.length-1]!==r&&(h.current.push(r),p(!1))},[h,r]);let g=(0,d.useMemo)(()=>({show:r,appear:n,initial:m}),[r,n,m]);es(()=>{r?u("visible"):tB(f)||null===l.current||u("hidden")},[r,f]);let x={unmount:a},b=eF(()=>{var t;m&&p(!1),null==(t=e.beforeEnter)||t.call(e)}),v=eF(()=>{var t;m&&p(!1),null==(t=e.beforeLeave)||t.call(e)}),y=e4();return d.createElement(tq.Provider,{value:f},d.createElement(tG.Provider,{value:g},y({ourProps:{...x,as:d.Fragment,children:d.createElement(tK,{ref:i,...x,...s,beforeEnter:b,beforeLeave:v})},theirProps:{},defaultTag:d.Fragment,features:tY,visible:"visible"===c,name:"Transition"})))}),tK=e8(function(e,t){var r,n;let{transition:a=!0,beforeEnter:s,afterEnter:l,beforeLeave:i,afterLeave:o,enter:c,enterFrom:u,enterTo:f,entered:m,leave:p,leaveFrom:h,leaveTo:g,...x}=e,[b,v]=(0,d.useState)(null),y=(0,d.useRef)(null),j=t$(e),w=to(...j?[y,t,v]:null===t?[]:[t]),N=null==(r=x.unmount)||r?e2.Unmount:e2.Hidden,{show:C,appear:S,initial:k}=function(){let e=(0,d.useContext)(tG);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[E,A]=(0,d.useState)(C?"visible":"hidden"),P=function(){let e=(0,d.useContext)(tq);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:F,unregister:M}=P;es(()=>F(y),[F,y]),es(()=>{if(N===e2.Hidden&&y.current)return C&&"visible"!==E?void A("visible"):ej(E,{hidden:()=>M(y),visible:()=>F(y)})},[E,y,F,M,C,N]);let O=tl();es(()=>{if(j&&O&&"visible"===E&&null===y.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[y,E,O,j]);let T=S&&C&&k,R=(0,d.useRef)(!1),D=tW(()=>{R.current||(A("hidden"),M(y))},P),[,_]=function(e,t,r,n){let[a,s]=(0,d.useState)(r),{hasFlag:l,addFlag:i,removeFlag:o}=function(e=0){let[t,r]=(0,d.useState)(e),n=(0,d.useCallback)(e=>r(e),[t]),a=(0,d.useCallback)(e=>r(t=>t|e),[t]),s=(0,d.useCallback)(e=>(t&e)===e,[t]);return{flags:t,setFlag:n,addFlag:a,hasFlag:s,removeFlag:(0,d.useCallback)(e=>r(t=>t&~e),[r]),toggleFlag:(0,d.useCallback)(e=>r(t=>t^e),[r])}}(e&&a?3:0),c=(0,d.useRef)(!1),u=(0,d.useRef)(!1);return es(()=>{var a;if(e){if(r&&s(!0),!t){r&&i(3);return}return null==(a=null==n?void 0:n.start)||a.call(n,r),function(e,{prepare:t,run:r,done:n,inFlight:a}){let s=ed();return function(e,{inFlight:t,prepare:r}){if(null!=t&&t.current)return r();let n=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=n}(e,{prepare:t,inFlight:a}),s.nextFrame(()=>{r(),s.requestAnimationFrame(()=>{s.add(function(e,t){var r,n;let a=ed();if(!e)return a.dispose;let s=!1;a.add(()=>{s=!0});let l=null!=(n=null==(r=e.getAnimations)?void 0:r.call(e).filter(e=>e instanceof CSSTransition))?n:[];return 0===l.length?t():Promise.allSettled(l.map(e=>e.finished)).then(()=>{s||t()}),a.dispose}(e,n))})}),s.dispose}(t,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,u.current||(r?(i(3),o(4)):(i(4),o(2)))},run(){u.current?r?(o(3),i(4)):(o(4),i(3)):r?o(1):i(1)},done(){var e;u.current&&"function"==typeof t.getAnimations&&t.getAnimations().length>0||(c.current=!1,o(7),r||s(!1),null==(e=null==n?void 0:n.end)||e.call(n,r))}})}},[e,r,t,tj()]),e?[a,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}(!(!a||!j||!O||k&&!S),b,C,{start:eF(e=>{R.current=!0,D.onStart(y,e?"enter":"leave",e=>{"enter"===e?null==s||s():"leave"===e&&(null==i||i())})}),end:eF(e=>{let t=e?"enter":"leave";R.current=!1,D.onStop(y,t,e=>{"enter"===e?null==l||l():"leave"===e&&(null==o||o())}),"leave"!==t||tB(D)||(A("hidden"),M(y))})}),L=e7({ref:w,className:(null==(n=e0(x.className,T&&c,T&&u,_.enter&&c,_.enter&&_.closed&&u,_.enter&&!_.closed&&f,_.leave&&p,_.leave&&!_.closed&&h,_.leave&&_.closed&&g,!_.transition&&C&&m))?void 0:n.trim())||void 0,...function(e){let t={};for(let r in e)!0===e[r]&&(t[`data-${r}`]="");return t}(_)}),I=0;"visible"===E&&(I|=tf.Open),"hidden"===E&&(I|=tf.Closed),C&&"hidden"===E&&(I|=tf.Opening),C||"visible"!==E||(I|=tf.Closing);let z=e4();return d.createElement(tq.Provider,{value:D},d.createElement(tp,{value:I},z({ourProps:L,theirProps:x,defaultTag:tV,features:tY,visible:"visible"===E,name:"Transition.Child"})))}),tZ=e8(function(e,t){let r=null!==(0,d.useContext)(tG),n=null!==tm();return d.createElement(d.Fragment,null,!r&&n?d.createElement(tX,{ref:t,...e}):d.createElement(tK,{ref:t,...e}))}),tJ=Object.assign(tX,{Child:tZ,Root:tX});var tQ=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(tQ||{}),t0=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(t0||{});let t1={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},t2=(0,d.createContext)(null);function t4(e){let t=(0,d.useContext)(t2);if(null===t){let t=Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,t4),t}return t}function t5(e,t){return ej(t.type,t1,e,t)}t2.displayName="DialogContext";let t3=e8(function(e,t){let r,n,a,s,l,i,o,c,u,f=(0,d.useId)(),{id:m=`headlessui-dialog-${f}`,open:p,onClose:h,initialFocus:g,role:x="dialog",autoFocus:b=!0,__demoMode:v=!1,unmount:y=!1,...j}=e,w=(0,d.useRef)(!1);x="dialog"===x||"alertdialog"===x?x:(w.current||(w.current=!0,console.warn(`Invalid role [${x}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog");let N=tm();void 0===p&&null!==N&&(p=(N&tf.Open)===tf.Open);let C=(0,d.useRef)(null),S=to(C,t),k=eQ(C),E=+!p,[A,P]=(0,d.useReducer)(t5,{titleId:null,descriptionId:null,panelRef:(0,d.createRef)()}),F=eF(()=>h(!1)),M=eF(e=>P({type:0,id:e})),O=!!tl()&&0===E,[T,R]=(r=(0,d.useContext)(t_),n=(0,d.useRef)([]),a=eF(e=>(n.current.push(e),r&&r.register(e),()=>s(e))),s=eF(e=>{let t=n.current.indexOf(e);-1!==t&&n.current.splice(t,1),r&&r.unregister(e)}),l=(0,d.useMemo)(()=>({register:a,unregister:s,portals:n}),[a,s,n]),[n,(0,d.useMemo)(()=>function({children:e}){return d.createElement(t_.Provider,{value:l},e)},[l])]),D=ta(),{resolveContainers:_}=function({defaultContainers:e=[],portals:t,mainTreeNode:r}={}){let n=eQ(r),a=eF(()=>{var a,s;let l=[];for(let t of e)null!==t&&(ez(t)?l.push(t):"current"in t&&ez(t.current)&&l.push(t.current));if(null!=t&&t.current)for(let e of t.current)l.push(e);for(let e of null!=(a=null==n?void 0:n.querySelectorAll("html > *, body > *"))?a:[])e!==document.body&&e!==document.head&&ez(e)&&"headlessui-portal-root"!==e.id&&(r&&(e.contains(r)||e.contains(null==(s=null==r?void 0:r.getRootNode())?void 0:s.host))||l.some(t=>e.contains(t))||l.push(e));return l});return{resolveContainers:a,contains:eF(e=>a().some(t=>t.contains(e)))}}({mainTreeNode:D,portals:T,defaultContainers:[{get current(){var L;return null!=(L=A.panelRef.current)?L:C.current}}]}),I=null!==N&&(N&tf.Closing)===tf.Closing;!function(e,{allowed:t,disallowed:r}={}){let n=eT(e,"inert-others");es(()=>{var e,a;if(!n)return;let s=ed();for(let t of null!=(e=null==r?void 0:r())?e:[])t&&s.add(eL(t));let l=null!=(a=null==t?void 0:t())?a:[];for(let e of l){if(!e)continue;let t=eR(e);if(!t)continue;let r=e.parentElement;for(;r&&r!==t.body;){for(let e of r.children)l.some(t=>e.contains(t))||s.add(eL(e));r=r.parentElement}}return s.dispose},[n,t,r])}(!v&&!I&&O,{allowed:eF(()=>{var e,t;return[null!=(t=null==(e=C.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:eF(()=>{var e;return[null!=(e=null==D?void 0:D.closest("body > *:not(#headlessui-portal-root)"))?e:null]})});let z=eA.get(null);es(()=>{if(O)return z.actions.push(m),()=>z.actions.pop(m)},[z,m,O]);let U=eM(z,(0,d.useCallback)(e=>z.selectors.isTop(e,m),[z,m]));i=el(e=>{e.preventDefault(),F()}),o=(0,d.useCallback)(function(e,t){if(e.defaultPrevented)return;let r=t(e);if(null!==r&&r.getRootNode().contains(r)&&r.isConnected){for(let t of function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(_))if(null!==t&&(t.contains(r)||e.composed&&e.composedPath().includes(t)))return;return function(e,t=0){var r;return e!==(null==(r=eR(e))?void 0:r.body)&&ej(t,{0:()=>e.matches(eG),1(){let t=e;for(;null!==t;){if(t.matches(eG))return!0;t=t.parentElement}return!1}})}(r,eV.Loose)||-1===r.tabIndex||e.preventDefault(),i.current(e,r)}},[i,_]),c=(0,d.useRef)(null),el(e=>{var t,r;eJ()||(c.current=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)}),el(e=>{if(eJ()||!c.current)return;let t=c.current;return c.current=null,o(e,()=>t)}),u=(0,d.useRef)({x:0,y:0}),el(e=>{u.current.x=e.touches[0].clientX,u.current.y=e.touches[0].clientY}),el(e=>{let t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(!(Math.abs(t.x-u.current.x)>=30||Math.abs(t.y-u.current.y)>=30))return o(e,()=>e$(e.target)?e.target:null)}),el(e=>o(e,()=>{var e;return eU(e=window.document.activeElement)&&"IFRAME"===e.nodeName?window.document.activeElement:null})),function(e,t="undefined"!=typeof document?document.defaultView:null,r){let n=eT(e,"escape");el(e=>{n&&(e.defaultPrevented||e.key===Q.Escape&&r(e))})}(U,null==k?void 0:k.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),F()}),function(e,t,r=()=>[document.body]){!function(e,t,r=()=>({containers:[]})){let n=(0,d.useSyncExternalStore)(ts.subscribe,ts.getSnapshot,ts.getSnapshot),a=t?n.get(t):void 0;a&&a.count,es(()=>{if(!(!t||!e))return ts.dispatch("PUSH",t,r),()=>ts.dispatch("POP",t,r)},[e,t])}(eT(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],r]}})}(!v&&!I&&O,k,_),el(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&F()});let[$,G]=function(){let[e,t]=(0,d.useState)([]);return[e.length>0?e.join(" "):void 0,(0,d.useMemo)(()=>function(e){let r=eF(e=>(t(t=>[...t,e]),()=>t(t=>{let r=t.slice(),n=r.indexOf(e);return -1!==n&&r.splice(n,1),r}))),n=(0,d.useMemo)(()=>({register:r,slot:e.slot,name:e.name,props:e.props,value:e.value}),[r,e.slot,e.name,e.props,e.value]);return d.createElement(tv.Provider,{value:n},e.children)},[t])]}(),H=(0,d.useMemo)(()=>[{dialogState:E,close:F,setTitleId:M,unmount:y},A],[E,A,F,M,y]),q=(0,d.useMemo)(()=>({open:0===E}),[E]),B={ref:S,id:m,role:x,tabIndex:-1,"aria-modal":v?void 0:0===E||void 0,"aria-labelledby":A.titleId,"aria-describedby":$,unmount:y},W=!function(){var e;let[t]=(0,d.useState)(()=>null),[r,n]=(0,d.useState)(null!=(e=null==t?void 0:t.matches)&&e);return es(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){n(e.matches)}},[t]),r}(),V=tA.None;O&&!v&&(V|=tA.RestoreFocus,V|=tA.TabLock,b&&(V|=tA.AutoFocus),W&&(V|=tA.InitialFocus));let Y=e4();return d.createElement(th,null,d.createElement(tx,{force:!0},d.createElement(tz,null,d.createElement(t2.Provider,{value:H},d.createElement(tI,{target:C},d.createElement(tx,{force:!1},d.createElement(G,{slot:q},d.createElement(R,null,d.createElement(tP,{initialFocus:g,initialFocusFallback:C,containers:_,features:V},d.createElement(tc,{value:F},Y({ourProps:B,theirProps:j,slot:q,defaultTag:t6,features:t8,visible:0===E,name:"Dialog"})))))))))))}),t6="div",t8=e1.RenderStrategy|e1.Static,t7=Object.assign(e8(function(e,t){let{transition:r=!1,open:n,...a}=e,s=tm(),l=e.hasOwnProperty("open")||null!==s,i=e.hasOwnProperty("onClose");if(!l&&!i)throw Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!i)throw Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&"boolean"!=typeof e.open)throw Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if("function"!=typeof e.onClose)throw Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(void 0!==n||r)&&!a.static?d.createElement(tn,null,d.createElement(tJ,{show:n,transition:r,unmount:a.unmount},d.createElement(t3,{ref:t,...a}))):d.createElement(tn,null,d.createElement(t3,{ref:t,open:n,...a}))}),{Panel:e8(function(e,t){let r=(0,d.useId)(),{id:n=`headlessui-dialog-panel-${r}`,transition:a=!1,...s}=e,[{dialogState:l,unmount:i},o]=t4("Dialog.Panel"),c=to(t,o.panelRef),u=(0,d.useMemo)(()=>({open:0===l}),[l]),f=eF(e=>{e.stopPropagation()}),m=a?tZ:d.Fragment,p=e4();return d.createElement(m,{...a?{unmount:i}:{}},p({ourProps:{ref:c,id:n,onClick:f},theirProps:s,slot:u,defaultTag:"div",name:"Dialog.Panel"}))}),Title:(e8(function(e,t){let{transition:r=!1,...n}=e,[{dialogState:a,unmount:s}]=t4("Dialog.Backdrop"),l=(0,d.useMemo)(()=>({open:0===a}),[a]),i=r?tZ:d.Fragment,o=e4();return d.createElement(i,{...r?{unmount:s}:{}},o({ourProps:{ref:t,"aria-hidden":!0},theirProps:n,slot:l,defaultTag:"div",name:"Dialog.Backdrop"}))}),e8(function(e,t){let r=(0,d.useId)(),{id:n=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:s,setTitleId:l}]=t4("Dialog.Title"),i=to(t),o=(0,d.useMemo)(()=>({open:0===s}),[s]);return e4()({ourProps:{ref:i,id:n},theirProps:a,slot:o,defaultTag:"h2",name:"Dialog.Title"})})),Description:ty}),t9=({chat:e,handleClickOutside:t})=>{let[r,n]=(0,d.useState)(!1),[a,s]=(0,d.useState)(null),l=e.name.split(" ").map(e=>e[0]).join("").toUpperCase(),{user:i}=(0,p.n)(),{fetchFriendDetails:c}=h(),u=e.participants.find(e=>e!==i?.id);return((0,d.useEffect)(()=>{(async()=>{if(u)try{let e=await c(u);s(e)}catch(e){console.error("Failed to fetch friend details",e)}})()},[u]),a)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{onClick:t,className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(13, 17, 23, 0.8)"},children:(0,o.jsxs)("div",{className:"relative w-auto bg-navbar-bg border-primary border max-w-md p-4 backdrop-blur-sm rounded-lg shadow-lg flex flex-col items-center",children:[(0,o.jsx)("div",{className:"w-20 h-20 mx-auto rounded-full overflow-hidden cursor-pointer border-2 border-blue-400 relative",onClick:()=>n(!0),children:a.profilePicture?(0,o.jsx)(A(),{src:a.profilePicture,alt:a.firstname,width:80,height:80,className:"w-full h-full object-cover"}):(0,o.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500 text-white text-2xl font-bold",children:l})}),(0,o.jsxs)("div",{className:"mt-2 text-white text-sm font-semibold",children:[a.firstname," ",a.lastname]}),(0,o.jsx)("div",{className:"mt-1 text-gray-400 text-sm",children:a.email})]})}),(0,o.jsxs)(t7,{open:r,onClose:()=>n(!1),className:"relative z-50",children:[(0,o.jsx)("div",{className:"fixed inset-0 bg-black/70","aria-hidden":"true"}),(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,o.jsxs)(t7.Panel,{className:"bg-[#0d1117] p-4 rounded-lg border border-primary max-w-md w-full",children:[(0,o.jsx)("div",{className:"text-right mb-2",children:(0,o.jsx)("button",{onClick:()=>n(!1),className:"text-sm text-gray-400 hover:text-white",children:"Close"})}),a.profilePicture?(0,o.jsx)(A(),{src:a.profilePicture,alt:`${a.firstname}'s profile`,width:400,height:400,className:"w-full h-auto rounded"}):(0,o.jsx)("div",{className:"w-full h-64 flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500 text-white text-4xl font-bold rounded",children:l})]})})]})]}):null},re=({isOpen:e,handleClose:t,showCreateGroup:r,handleClickOutside:n,showUpdateGroup:a,updateGroupChat:s,handleGroupUpdated:l,showFriendProfile:i})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:`${e?"flex":"hidden"} fixed inset-0 z-[1000] bg-navbar-bg flex-col  items-center justify-center overflow-auto`,children:[(0,o.jsx)("button",{onClick:t,className:"text-primary text-3xl font-bold hover:text-red-500 transition-colors p-2","aria-label":"Close",children:"\xd7"}),(0,o.jsx)(K,{})]}),(0,o.jsx)("div",{className:`${r?"block":"hidden"} absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center h-full border p-4 md:p-8 z-[100]`,children:(0,o.jsx)(Z,{handleClickOutside:n})}),(0,o.jsx)("div",{className:`${a?"block":"hidden"} absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center h-full border p-4 md:p-8 z-[100]`,children:s&&(0,o.jsx)(J,{handleClickOutside:n,onGroupUpdated:l,group:{id:s.id,name:s.name,participants:s.participants.map(e=>e.id)}})}),(0,o.jsx)("div",{className:`${i?"block":"hidden"} absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center h-full border p-4 md:p-8 z-[100]`,children:s&&(0,o.jsx)(t9,{chat:{id:s.id,name:s.name,participants:s.participants.map(e=>e.id)},handleClickOutside:n})})]}),rt=()=>{let[e,t]=(0,d.useState)(!1),[r,n]=(0,d.useState)(null),[a,s]=(0,d.useState)(!1),[l,i]=(0,d.useState)(!1),[c,u]=(0,d.useState)(!1),[f,x]=(0,d.useState)(null),{isAuthenticated:b,getSession:v}=(0,p.n)(),{chats:y,fetchChatsSummary:j}=m(),[w,N]=(0,d.useState)(!0),[C,S]=(0,d.useState)("redirecting"),{fetchFriends:k,fetchOnlineFriends:E,fetchAllUsers:A}=h();(0,d.useEffect)(()=>{(async()=>{await v()})()},[v]),(0,d.useEffect)(()=>{if(b){S("redirecting");let e=setTimeout(()=>{S("authenticating")},2500),t=setTimeout(()=>{N(!1)},5e3);return()=>{clearTimeout(e),clearTimeout(t)}}N(!1)},[b]),(0,d.useEffect)(()=>{A(),k(),j(),E()},[A,k,E,j]);let P=()=>t(!0),F=async(e,t)=>{if(t)return void n(t);let r=y.find(t=>Number(t.id)===e)||null;if(!r||!Array.isArray(r.participants))return void n(null);n({...r,participants:r.participants.map(e=>({id:e.id,name:e.name??""})),lastMessage:r.lastMessage??void 0,lastMessageAt:r.lastMessageAt??void 0})},M=()=>{s(!a)},O=e=>{e?.isGroup?(x(e),i(!l)):(u(!c),x(e))},T=()=>n(null);return w?(0,o.jsxs)("div",{className:"h-screen bg-navbar-bg flex flex-col justify-center items-center gap-4 ",children:[(0,o.jsx)(g.H5,{}),(0,o.jsx)("p",{className:"text-lg font-semibold text-primary",children:"redirecting"===C?"redirecting...":"Authenticating..."}),(0,o.jsx)("div",{className:"w-64 h-2 bg-gray-300 rounded-full overflow-hidden mt-2",children:(0,o.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-400 to-purple-600 animate-progressBar",style:{animationDuration:"5s"}})})]}):(0,o.jsxs)("div",{className:"h-screen overflow-hidden ",children:[(0,o.jsx)(V,{selectedChat:r,handleUpdateOpen:O,handleBack:T,handleGroup:M,handleChatSelect:F,handleClick:P}),(0,o.jsx)(Y,{selectedChat:r,handleUpdateOpen:O,handleBack:T,handleGroup:M,handleChatSelect:F,handleClick:P}),(0,o.jsx)(re,{isOpen:e,handleClose:()=>t(!1),showCreateGroup:a,handleClickOutside:()=>{s(!1),i(!1),u(!1)},showUpdateGroup:l,updateGroupChat:f,handleGroupUpdated:e=>{n(t=>t&&t.id===e.id?{...t,name:e.name,participants:e.participants.map(e=>t.participants.find(t=>t.id===e)||{id:e,name:""})}:t)},showFriendProfile:c})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},12756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return n}});let r=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},13224:(e,t,r)=>{Promise.resolve().then(r.bind(r,80559))},14959:(e,t,r)=>{"use strict";e.exports=r(94041).vendored.contexts.AmpContext},16189:(e,t,r)=>{"use strict";var n=r(65773);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},17107:(e,t,r)=>{Promise.resolve().then(r.bind(r,63902))},17903:(e,t,r)=>{"use strict";e.exports=r(94041).vendored.contexts.ImageConfigContext},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},24377:(e,t,r)=>{"use strict";r.d(t,{K:()=>l});var n=r(26787),a=r(51060),s=r(59350);a.A.defaults.withCredentials=!0,a.A.defaults.baseURL="https://chat-app-tk-blg.fly.dev";let l=(0,n.v)()((0,s.lt)(e=>({user:null,isLoading:!1,error:null,message:null,getProfile:async()=>{e({isLoading:!0,error:null,message:null});try{let t=await a.A.get("/profile");e({user:t.data.user,message:null,isLoading:!1})}catch(t){e({error:t.response?.data?.error||t.message})}finally{e({isLoading:!1})}},updateProfile:async t=>{e({isLoading:!0,error:null,message:null});try{let r=await a.A.put("/profile",t),n=await a.A.get("/profile");e({user:n.data.user,message:r.data.message})}catch(t){e({error:t.response?.data?.error||t.message})}finally{e({isLoading:!1})}},changePassword:async(t,r)=>{e({isLoading:!0,error:null,message:null});try{let n=await a.A.put("/profile/change-password",{currentPassword:t,newPassword:r});return e({message:n.data.message}),n.data}catch(r){let t=r.response?.data?.error||r.response?.data?.message||r.message;throw e({error:t}),Error(t)}finally{e({isLoading:!1})}},forgotPassword:async t=>{e({isLoading:!0,error:null,message:null});try{let r=await a.A.post("/profile/forget-password",{email:t});e({message:r.data.message})}catch(t){e({error:t.response?.data?.error||t.message})}finally{e({isLoading:!1})}},resetPassword:async({email:t,token:r,newPassword:n})=>{e({isLoading:!0,error:null,message:null});try{let s=await a.A.post("/profile/reset-password",{email:t,token:r,newPassword:n});e({message:s.data.message})}catch(t){e({error:t.response?.data?.error||t.message})}finally{e({isLoading:!1})}},uploadProfilePicture:async t=>{e({isLoading:!0,error:null,message:null});let r=new FormData;r.append("image",t);try{let t=await a.A.post("/profile/upload-profile-picture",r,{headers:{"Content-Type":"multipart/form-data"}});e({message:t.data.message}),await l.getState().getProfile()}catch(t){e({error:t.response?.data?.error||t.message})}finally{e({isLoading:!1})}},clearState:()=>e({isLoading:!1,error:null,message:null})})))},25039:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d});var n=r(65239),a=r(48088),s=r(88170),l=r.n(s),i=r(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,80559)),"/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,63144)),"/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/dashboard/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28559:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return h},defaultHead:function(){return u}});let n=r(14985),a=r(40740),s=r(60687),l=a._(r(43210)),i=n._(r(47755)),o=r(14959),d=r(89513),c=r(34604);function u(e){void 0===e&&(e=!1);let t=[(0,s.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,s.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function f(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(50148);let m=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:r}=t;return e.reduce(f,[]).reverse().concat(u(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,n={};return a=>{let s=!0,l=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){l=!0;let t=a.key.slice(a.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(a.type){case"title":case"base":t.has(a.type)?s=!1:t.add(a.type);break;case"meta":for(let e=0,t=m.length;e<t;e++){let t=m[e];if(a.props.hasOwnProperty(t))if("charSet"===t)r.has(t)?s=!1:r.add(t);else{let e=a.props[t],r=n[t]||new Set;("name"!==t||!l)&&r.has(e)?s=!1:(r.add(e),n[t]=r)}}}return s}}()).reverse().map((e,t)=>{let n=e.key||t;if(process.env.__NEXT_OPTIMIZE_FONTS&&!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,l.default.cloneElement(e,t)}return l.default.cloneElement(e,{key:n})})}let h=function(e){let{children:t}=e,r=(0,l.useContext)(o.AmpStateContext),n=(0,l.useContext)(d.HeadManagerContext);return(0,s.jsx)(i.default,{reduceComponentsToState:p,headManager:n,inAmpMode:(0,c.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},31261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return i}});let n=r(14985),a=r(44953),s=r(46533),l=n._(r(1933));function i(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=s.Image},33873:e=>{"use strict";e.exports=require("path")},34604:(e,t)=>{"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||r&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},34631:e=>{"use strict";e.exports=require("tls")},41480:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:a,blurDataURL:s,objectFit:l}=e,i=n?40*n:t,o=a?40*a:r,d=i&&o?"viewBox='0 0 "+i+" "+o+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+d+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(d?"none":"contain"===l?"xMidYMid":"cover"===l?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},44953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return o}}),r(50148);let n=r(41480),a=r(12756),s=["-moz-initial","fill","none","scale-down",void 0];function l(e){return void 0!==e.default}function i(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function o(e,t){var r,o;let d,c,u,{src:f,sizes:m,unoptimized:p=!1,priority:h=!1,loading:g,className:x,quality:b,width:v,height:y,fill:j=!1,style:w,overrideSrc:N,onLoad:C,onLoadingComplete:S,placeholder:k="empty",blurDataURL:E,fetchPriority:A,decoding:P="async",layout:F,objectFit:M,objectPosition:O,lazyBoundary:T,lazyRoot:R,...D}=e,{imgConf:_,showAltText:L,blurComplete:I,defaultLoader:z}=t,U=_||a.imageConfigDefault;if("allSizes"in U)d=U;else{let e=[...U.deviceSizes,...U.imageSizes].sort((e,t)=>e-t),t=U.deviceSizes.sort((e,t)=>e-t),n=null==(r=U.qualities)?void 0:r.sort((e,t)=>e-t);d={...U,allSizes:e,deviceSizes:t,qualities:n}}if(void 0===z)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let $=D.loader||z;delete D.loader,delete D.srcSet;let G="__next_img_default"in $;if(G){if("custom"===d.loader)throw Object.defineProperty(Error('Image with src "'+f+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=$;$=t=>{let{config:r,...n}=t;return e(n)}}if(F){"fill"===F&&(j=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[F];e&&(w={...w,...e});let t={responsive:"100vw",fill:"100vw"}[F];t&&!m&&(m=t)}let H="",q=i(v),B=i(y);if((o=f)&&"object"==typeof o&&(l(o)||void 0!==o.src)){let e=l(f)?f.default:f;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,u=e.blurHeight,E=E||e.blurDataURL,H=e.src,!j)if(q||B){if(q&&!B){let t=q/e.width;B=Math.round(e.height*t)}else if(!q&&B){let t=B/e.height;q=Math.round(e.width*t)}}else q=e.width,B=e.height}let W=!h&&("lazy"===g||void 0===g);(!(f="string"==typeof f?f:H)||f.startsWith("data:")||f.startsWith("blob:"))&&(p=!0,W=!1),d.unoptimized&&(p=!0),G&&!d.dangerouslyAllowSVG&&f.split("?",1)[0].endsWith(".svg")&&(p=!0);let V=i(b),Y=Object.assign(j?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:M,objectPosition:O}:{},L?{}:{color:"transparent"},w),X=I||"empty"===k?null:"blur"===k?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:q,heightInt:B,blurWidth:c,blurHeight:u,blurDataURL:E||"",objectFit:Y.objectFit})+'")':'url("'+k+'")',K=s.includes(Y.objectFit)?"fill"===Y.objectFit?"100% 100%":"cover":Y.objectFit,Z=X?{backgroundSize:K,backgroundPosition:Y.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:X}:{},J=function(e){let{config:t,src:r,unoptimized:n,width:a,quality:s,sizes:l,loader:i}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:o,kind:d}=function(e,t,r){let{deviceSizes:n,allSizes:a}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:a.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:a,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>a.find(t=>t>=e)||a[a.length-1]))],kind:"x"}}(t,a,l),c=o.length-1;return{sizes:l||"w"!==d?l:"100vw",srcSet:o.map((e,n)=>i({config:t,src:r,quality:s,width:e})+" "+("w"===d?e:n+1)+d).join(", "),src:i({config:t,src:r,quality:s,width:o[c]})}}({config:d,src:f,unoptimized:p,width:q,quality:V,sizes:m,loader:$});return{props:{...D,loading:W?"lazy":g,fetchPriority:A,width:q,height:B,decoding:P,className:x,style:{...Y,...Z},sizes:J.sizes,srcSet:J.srcSet,src:N||J.src},meta:{unoptimized:p,priority:h,placeholder:k,fill:j}}}},46533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return y}});let n=r(14985),a=r(40740),s=r(60687),l=a._(r(43210)),i=n._(r(51215)),o=n._(r(30512)),d=r(44953),c=r(12756),u=r(17903);r(50148);let f=r(69148),m=n._(r(1933)),p=r(53038),h={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function g(e,t,r,n,a,s,l){let i=null==e?void 0:e.src;e&&e["data-loaded-src"]!==i&&(e["data-loaded-src"]=i,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,a=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function x(e){return l.use?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let b=(0,l.forwardRef)((e,t)=>{let{src:r,srcSet:n,sizes:a,height:i,width:o,decoding:d,className:c,style:u,fetchPriority:f,placeholder:m,loading:h,unoptimized:b,fill:v,onLoadRef:y,onLoadingCompleteRef:j,setBlurComplete:w,setShowAltText:N,sizesInput:C,onLoad:S,onError:k,...E}=e,A=(0,l.useCallback)(e=>{e&&(k&&(e.src=e.src),e.complete&&g(e,m,y,j,w,b,C))},[r,m,y,j,w,k,b,C]),P=(0,p.useMergedRef)(t,A);return(0,s.jsx)("img",{...E,...x(f),loading:h,width:o,height:i,decoding:d,"data-nimg":v?"fill":"1",className:c,style:u,sizes:a,srcSet:n,src:r,ref:P,onLoad:e=>{g(e.currentTarget,m,y,j,w,b,C)},onError:e=>{N(!0),"empty"!==m&&w(!0),k&&k(e)}})});function v(e){let{isAppRouter:t,imgAttributes:r}=e,n={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...x(r.fetchPriority)};return t&&i.default.preload?(i.default.preload(r.src,n),null):(0,s.jsx)(o.default,{children:(0,s.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...n},"__nimg-"+r.src+r.srcSet+r.sizes)})}let y=(0,l.forwardRef)((e,t)=>{let r=(0,l.useContext)(f.RouterContext),n=(0,l.useContext)(u.ImageConfigContext),a=(0,l.useMemo)(()=>{var e;let t=h||n||c.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),a=t.deviceSizes.sort((e,t)=>e-t),s=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:a,qualities:s}},[n]),{onLoad:i,onLoadingComplete:o}=e,p=(0,l.useRef)(i);(0,l.useEffect)(()=>{p.current=i},[i]);let g=(0,l.useRef)(o);(0,l.useEffect)(()=>{g.current=o},[o]);let[x,y]=(0,l.useState)(!1),[j,w]=(0,l.useState)(!1),{props:N,meta:C}=(0,d.getImgProps)(e,{defaultLoader:m.default,imgConf:a,blurComplete:x,showAltText:j});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{...N,unoptimized:C.unoptimized,placeholder:C.placeholder,fill:C.fill,onLoadRef:p,onLoadingCompleteRef:g,setBlurComplete:y,setShowAltText:w,sizesInput:e.sizes,ref:t}),C.priority?(0,s.jsx)(v,{isAppRouter:!r,imgAttributes:N}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},47755:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let n=r(43210),a=()=>{},s=()=>{};function l(e){var t;let{headManager:r,reduceComponentsToState:l}=e;function i(){if(r&&r.mountedInstances){let t=n.Children.toArray(Array.from(r.mountedInstances).filter(Boolean));r.updateHead(l(t,e))}}return null==r||null==(t=r.mountedInstances)||t.add(e.children),i(),a(()=>{var t;return null==r||null==(t=r.mountedInstances)||t.add(e.children),()=>{var t;null==r||null==(t=r.mountedInstances)||t.delete(e.children)}}),a(()=>(r&&(r._pendingUpdate=i),()=>{r&&(r._pendingUpdate=i)})),s(()=>(r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null),()=>{r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null)})),null}},53038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=r(43210);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=s(e,n)),t&&(a.current=s(t,n))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62688:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(43210);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...u},f)=>(0,n.createElement)("svg",{ref:f,...d,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:i("lucide",s),...!l&&!o(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(l)?l:[l]])),u=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...s},o)=>(0,n.createElement)(c,{ref:o,iconNode:t,className:i(`lucide-${a(l(e))}`,`lucide-${e}`,r),...s}));return r.displayName=l(e),r}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/dashboard/layout.tsx","default")},63902:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(60687);function a({children:e}){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("main",{children:e})})}},69148:(e,t,r)=>{"use strict";e.exports=r(94041).vendored.contexts.RouterContext},74075:e=>{"use strict";e.exports=require("zlib")},76776:(e,t,r)=>{Promise.resolve().then(r.bind(r,8462))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},80559:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/touchbar/Documents/GitHub/chat-app/frontend/src/app/dashboard/page.tsx","default")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},89513:(e,t,r)=>{"use strict";e.exports=r(94041).vendored.contexts.HeadManagerContext},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,219,658,14],()=>r(25039));module.exports=n})();
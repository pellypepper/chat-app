(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{188:(e,t,r)=>{Promise.resolve().then(r.bind(r,4601))},351:(e,t,r)=>{"use strict";r.d(t,{n:()=>a});var s=r(5453),l=r(3464),n=r(6786);l.A.defaults.withCredentials=!0,l.A.defaults.baseURL="https://chat-app-tk-blg.fly.dev";let a=(0,s.v)()((0,n.lt)(e=>({user:null,isLoading:!1,error:null,verificationSent:!1,register:async t=>{e({isLoading:!0,error:null});try{let r=await l.A.post("/register",t);e({user:r.data.user,verificationSent:!0})}catch(t){var r,s;e({error:(null==(s=t.response)||null==(r=s.data)?void 0:r.error)||t.message})}finally{e({isLoading:!1})}},verifyEmail:async(t,r)=>{e({isLoading:!0,error:null});try{let s=await l.A.post("/register/verify",{email:t,code:r});e({user:s.data.user,verificationSent:!1})}catch(t){var s,n;e({error:(null==(n=t.response)||null==(s=n.data)?void 0:s.error)||t.message})}finally{e({isLoading:!1})}},reset:()=>e({user:null,isLoading:!1,error:null,verificationSent:!1})})))},2827:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155),l=r(5695),n=r(2115);let a=e=>{let{message:t,showContinueButton:r,handleTimeout:a,url:i,tempState:o}=e,c=(0,l.useRouter)(),[d,u]=n.useState(!0);return d?(0,s.jsx)("div",{id:"success-popup",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 text-primary rounded-2xl p-8 max-w-md w-full relative shadow-lg",children:[(0,s.jsx)("button",{onClick:()=>{u(!1),a&&a()},className:"absolute top-3 right-4 text-2xl text-white hover:text-red-400",children:"\xd7"}),(0,s.jsxs)("div",{className:"flex flex-col items-center success-popup",children:[(0,s.jsx)("div",{className:"w-16 h-16 flex items-center justify-center rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white text-3xl mb-4",children:"âœ“"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-white",children:"Success!"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 text-center",children:t})]}),(0,s.jsxs)("svg",{className:"w-16 h-16 mt-6 mx-auto text-green-500",viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("circle",{cx:"26",cy:"26",r:"25",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M14.1 27.2l7.1 7.2 16.7-16.8",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),r&&(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("button",{className:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-3 rounded-lg text-white font-semibold hover:shadow-lg transition",onClick:()=>{a&&a();let e=i?o?"".concat(i,"?tempState=").concat(encodeURIComponent(o)):i:"/";c.push(e)},children:"Continue"})})]})}):null}},4601:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),l=r(2115),n=r(351),a=r(5695),i=r(2827),o=r(5889),c=r(9492);let d=e=>{let{tempState:t,children:r,seconds:l,resendAvailable:n,onResend:a,onVerify:i,onCancel:o}=e;return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-[#161b22] w-[90%] max-w-md rounded-2xl p-6 shadow-lg relative",children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-white text-2xl hover:text-red-500",children:"\xd7"}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white text-2xl mb-4",children:"\uD83D\uDD10"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-1",children:"Enter Verification Code"}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["We've sent a 6-digit code to this email ",t,". Please enter it below to verify your account."]})]}),r,(0,s.jsx)("div",{className:"text-center text-sm text-gray-400",children:n?(0,s.jsx)("button",{onClick:a,className:"text-blue-400 hover:underline transition",children:"Resend Code"}):(0,s.jsxs)(s.Fragment,{children:["Resend code in ",(0,s.jsx)("span",{className:"text-white font-semibold",children:l})," seconds"]})}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,s.jsx)("button",{onClick:o,className:"px-5 py-2 rounded-lg border border-gray-600 text-white bg-[#0d1117] hover:bg-[#1a1f2b] transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:i,className:"px-5 py-2 rounded-lg text-white bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 shadow-md hover:shadow-lg transition",children:"Verify Code"})]})]})})},u=e=>{let{otp:t,inputRefs:r,onChange:l,onKeyDown:n}=e;return(0,s.jsx)("div",{className:"flex gap-3 justify-center mt-6 mb-4",children:t.map((e,t)=>(0,s.jsx)("input",{ref:e=>{r.current&&(r.current[t]=e)},type:"text",maxLength:1,value:e,onChange:e=>l(e.target.value,t),onKeyDown:e=>n(e,t),className:"w-12 h-12 text-center rounded-lg border border-gray-700 bg-[#0d1117] text-white text-lg font-bold focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition"},t))})},x=()=>{let e=(0,l.useRef)([]),[t,r]=(0,l.useState)(Array(6).fill("")),[x,m]=(0,l.useState)(60),[h,f]=(0,l.useState)("idle"),[b,g]=(0,l.useState)(!1),p=(0,a.useSearchParams)().get("tempState"),v=(0,a.useRouter)(),{verifyEmail:j,isLoading:w,error:y}=(0,n.n)();(0,l.useEffect)(()=>{if(0===x)return void g(!0);let e=setInterval(()=>{m(e=>e-1)},1e3);return()=>clearInterval(e)},[x]);let N=async()=>{if(p)if(await j(p,t.join("")),y)f("error");else{f("success");let e=setTimeout(()=>v.push("/public/signin"),3e3);return()=>clearTimeout(e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d,{tempState:p,seconds:x,resendAvailable:b,onVerify:N,onCancel:()=>window.history.back(),children:(0,s.jsx)(u,{otp:t,inputRefs:e,onChange:(s,l)=>{if(!/^[a-zA-Z0-9]?$/.test(s))return;let n=[...t];if(n[l]=s,r(n),s&&l<5){var a;null==(a=e.current[l+1])||a.focus()}},onKeyDown:(r,s)=>{if("Backspace"===r.key&&!t[s]&&s>0){var l;null==(l=e.current[s-1])||l.focus()}}})}),"success"===h&&(0,s.jsx)(i.A,{message:"Your email is verified. Redirecting...",handleTimeout:()=>{},url:"/withNavpages/signin",tempState:null}),"error"===h&&(0,s.jsx)(o.A,{message:y||"Unable to verify your email. Please try again.",handleTimeout:()=>f("idle")}),w&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:(0,s.jsx)(c.H5,{})})]})};function m(){return(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{children:(0,s.jsx)(c.H5,{})}),children:(0,s.jsx)(x,{})})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5889:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155),l=r(2115);let n=e=>{let{message:t,handleTimeout:r,handleSendResetLink:n}=e,[a,i]=(0,l.useState)(!0),o=()=>{i(!1),r&&r()};return a?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-[#161b22] w-[90%] max-w-md rounded-2xl p-6 shadow-lg relative",children:[(0,s.jsx)("button",{onClick:o,className:"absolute top-4 right-4 text-white text-2xl hover:text-red-500",children:"\xd7"}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-red-600 to-red-500 text-white text-2xl mb-4",children:"!"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Message Failed"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:t})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsx)("button",{onClick:o,className:"px-6 py-2 rounded-lg border border-gray-600 text-white bg-[#0d1117] hover:bg-[#1a1f2b] transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:n,className:"px-6 py-2 rounded-lg text-white bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 shadow-md hover:shadow-lg transition",children:"Retry"})]})]})}):null}},9492:(e,t,r)=>{"use strict";r.d(t,{H5:()=>l});var s=r(5155);let l=e=>{let{size:t="md",className:r=""}=e;return(0,s.jsxs)("div",{className:"relative ".concat({sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"}[t]," ").concat(r),children:[(0,s.jsx)("div",{className:"absolute inset-0 border-2 border-transparent border-t-[#58a6ff] rounded-full animate-spin"}),(0,s.jsx)("div",{className:"absolute top-1 left-1 right-1 bottom-1 border-2 border-transparent border-t-[#a855f7] rounded-full animate-spin-reverse",style:{animationDuration:"1.5s"}}),(0,s.jsx)("div",{className:"absolute top-2 left-2 right-2 bottom-2 border-2 border-transparent border-t-[#f97316] rounded-full animate-spin",style:{animationDuration:"2s"}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[655,441,684,358],()=>t(188)),_N_E=e.O()}]);
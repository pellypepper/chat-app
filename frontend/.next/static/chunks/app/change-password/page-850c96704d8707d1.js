(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{18041:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(95155),a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}),o=a.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}),n=a.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});var i=r(75564),d=r(41795),c=r(35695),u=r(84929),m=r(97007);function g(){let[e,t]=(0,a.useState)(""),[r,g]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1),[w,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[j,N]=(0,a.useState)({}),[P,k]=(0,a.useState)(!1),[C,_]=(0,a.useState)(0),[O,S]=(0,a.useState)(!1),[L,M]=(0,a.useState)(!1),[E,R]=(0,a.useState)(""),{changePassword:q,isLoading:D}=(0,d.useProfileStore)(),W=(0,c.useRouter)(),z=()=>{let t={};return e||(t.currentPassword="Current password is required"),r?i.passwordRequirements.filter(e=>e.test(r)).length<4&&(t.newPassword="Password does not meet requirements"):t.newPassword="New password is required",x?r!==x&&(t.confirmPassword="Passwords do not match"):t.confirmPassword="Please confirm your new password",e&&r&&e===r&&(t.newPassword="New password must be different from current password"),N(t),0===Object.keys(t).length},A=async t=>{if(t.preventDefault(),z()){if(e===r)return void N({newPassword:"New password must be different from current password"});k(!0),_(0);try{await q(e,r);_(0);let t=setInterval(()=>{_(e=>(e+1>=100&&(clearInterval(t),_(100),k(!1),S(!0),setTimeout(()=>{S(!1),W.push("/dashboard"),B()},2e3)),Math.min(e+1,100)))},30)}catch(e){M(!0),R((null==e?void 0:e.message)||("string"==typeof e?e:"Error changing password")),k(!1)}}},B=()=>{t(""),g(""),h(""),p(!1),b(!1),y(!1),N({}),k(!1),_(0),S(!1),M(!1),R("")};return(0,a.useEffect)(()=>{x&&r!==x?N(e=>({...e,confirmPassword:"Passwords do not match"})):N(e=>{let t={...e};return delete t.confirmPassword,t})},[r,x]),(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl max-w-md w-full relative animate-in fade-in-0 zoom-in-95 duration-300",children:[(0,s.jsx)("button",{onClick:()=>window.history.back(),className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors p-1 rounded-full hover:bg-gray-800",children:(0,s.jsx)(l,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"text-center p-8 pb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-2xl",children:"\uD83D\uDD10"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Change Password"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Update your account password"})]}),P||D?(0,s.jsxs)("div",{className:"px-8 pb-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 border-3 border-gray-700 border-t-blue-500 rounded-full animate-spin"}),(0,s.jsx)("h3",{className:"text-xl font-medium text-white mb-2",children:"Changing Password..."}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Please wait while we update your password"})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300 ease-out",style:{width:"".concat(C,"%")}})})]}):(0,s.jsxs)("form",{onSubmit:A,className:"px-8 pb-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Current Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:f?"text":"password",value:e,onChange:e=>t(e.target.value),className:"w-full bg-gray-800 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ".concat(j.currentPassword?"border-red-500":"border-gray-600 focus:border-blue-500"),placeholder:"Enter current password"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:f?(0,s.jsx)(o,{className:"h-5 w-5"}):(0,s.jsx)(n,{className:"h-5 w-5"})})]}),j.currentPassword&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:j.currentPassword})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:w?"text":"password",value:r,onChange:e=>g(e.target.value),className:"w-full bg-gray-800 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ".concat(j.newPassword?"border-red-500":"border-gray-600 focus:border-blue-500"),placeholder:"Enter new password"}),(0,s.jsx)("button",{type:"button",onClick:()=>b(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:w?(0,s.jsx)(o,{className:"h-5 w-5"}):(0,s.jsx)(n,{className:"h-5 w-5"})})]}),j.newPassword&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:j.newPassword}),(0,s.jsx)(i.default,{password:r})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:v?"text":"password",value:x,onChange:e=>h(e.target.value),className:"w-full bg-gray-800 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ".concat(j.confirmPassword?"border-red-500":x&&r===x?"border-green-500":"border-gray-600 focus:border-blue-500"),placeholder:"Confirm new password"}),(0,s.jsx)("button",{type:"button",onClick:()=>y(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:v?(0,s.jsx)(o,{className:"h-5 w-5"}):(0,s.jsx)(n,{className:"h-5 w-5"})})]}),j.confirmPassword&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:j.confirmPassword})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"flex-1 px-4 py-3 bg-gray-800 border border-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all transform hover:-translate-y-0.5 hover:shadow-lg hover:shadow-blue-500/25",children:"Change Password"})]})]}),O&&(0,s.jsx)(u.default,{message:"Password changed successfully!",handleTimeout:B,url:"/dashboard",tempState:null}),L&&(0,s.jsx)(m.default,{message:E||"Error changing password",handleTimeout:()=>M(!1)})]})})}},35695:(e,t,r)=>{"use strict";r.r(t);var s=r(18999),a={};for(let e in s)"default"!==e&&(a[e]=()=>s[e]);r.d(t,a)},41795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useProfileStore=void 0;let s=r(87657),a=function(e){return e&&e.__esModule?e:{default:e}}(r(43653)),l=r(82127);a.default.defaults.withCredentials=!0,a.default.defaults.baseURL="https://chat-app-tk-blg.fly.dev",t.useProfileStore=(0,s.create)()((0,l.devtools)(e=>({user:null,isLoading:!1,error:null,message:null,getProfile:async()=>{e({isLoading:!0,error:null,message:null});try{let t=await a.default.get("/profile");e({user:t.data.user,message:null,isLoading:!1})}catch(s){var t,r;e({error:(null==(r=s.response)||null==(t=r.data)?void 0:t.error)||s.message})}finally{e({isLoading:!1})}},updateProfile:async t=>{e({isLoading:!0,error:null,message:null});try{let r=await a.default.put("/profile",t),s=await a.default.get("/profile");e({user:s.data.user,message:r.data.message})}catch(t){var r,s;e({error:(null==(s=t.response)||null==(r=s.data)?void 0:r.error)||t.message})}finally{e({isLoading:!1})}},changePassword:async(t,r)=>{e({isLoading:!0,error:null,message:null});try{let s=await a.default.put("/profile/change-password",{currentPassword:t,newPassword:r});return e({message:s.data.message}),s.data}catch(r){var s,l,o,n;let t=(null==(l=r.response)||null==(s=l.data)?void 0:s.error)||(null==(n=r.response)||null==(o=n.data)?void 0:o.message)||r.message;throw e({error:t}),Error(t)}finally{e({isLoading:!1})}},forgotPassword:async t=>{e({isLoading:!0,error:null,message:null});try{let r=await a.default.post("/profile/forget-password",{email:t});e({message:r.data.message})}catch(t){var r,s;e({error:(null==(s=t.response)||null==(r=s.data)?void 0:r.error)||t.message})}finally{e({isLoading:!1})}},resetPassword:async t=>{let{email:r,token:s,newPassword:l}=t;e({isLoading:!0,error:null,message:null});try{let t=await a.default.post("/profile/reset-password",{email:r,token:s,newPassword:l});e({message:t.data.message})}catch(t){var o,n;e({error:(null==(n=t.response)||null==(o=n.data)?void 0:o.error)||t.message})}finally{e({isLoading:!1})}},uploadProfilePicture:async r=>{e({isLoading:!0,error:null,message:null});let s=new FormData;s.append("image",r);try{let r=await a.default.post("/profile/upload-profile-picture",s,{headers:{"Content-Type":"multipart/form-data"}});e({message:r.data.message}),await t.useProfileStore.getState().getProfile()}catch(t){var l,o;e({error:(null==(o=t.response)||null==(l=o.data)?void 0:l.error)||t.message})}finally{e({isLoading:!1})}},clearState:()=>e({isLoading:!1,error:null,message:null})})))},75564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(95155);function a(e){let r=t.passwordRequirements.filter(t=>t.test(e)).length;return 0===e.length?{level:"none",text:"Enter a password to see strength",color:"bg-gray-600"}:r<=2?{level:"weak",text:"Weak password",color:"bg-red-500"}:3===r?{level:"fair",text:"Fair password",color:"bg-orange-500"}:4===r?{level:"good",text:"Good password",color:"bg-green-500"}:{level:"strong",text:"Strong password",color:"bg-gradient-to-r from-blue-500 to-purple-500"}}function l(e){let r=t.passwordRequirements.filter(t=>t.test(e)).length;return"".concat(r/t.passwordRequirements.length*100,"%")}Object.defineProperty(t,"__esModule",{value:!0}),t.passwordRequirements=void 0,t.getPasswordStrength=a,t.getStrengthWidth=l,t.passwordRequirements=[{id:"length",text:"At least 8 characters long",test:e=>e.length>=8},{id:"uppercase",text:"One uppercase letter",test:e=>/[A-Z]/.test(e)},{id:"lowercase",text:"One lowercase letter",test:e=>/[a-z]/.test(e)},{id:"number",text:"One number",test:e=>/\d/.test(e)},{id:"special",text:"One special character",test:e=>/[!@#$%^&*(),.?":{}|<>]/.test(e)}],t.default=e=>{let{password:r,className:o}=e,n=a(r);return(0,s.jsxs)("div",{className:"mb-6 ".concat(o||""),children:[r&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full transition-all duration-300 ".concat(n.color),style:{width:l(r)}})}),(0,s.jsx)("p",{className:"text-xs mt-2 ".concat("weak"===n.level?"text-red-400":"fair"===n.level?"text-orange-400":"good"===n.level?"text-green-400":"strong"===n.level?"text-blue-400":"text-gray-400"),children:n.text})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg mt-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-white mb-3",children:"Password Requirements:"}),(0,s.jsx)("div",{className:"space-y-2",children:t.passwordRequirements.map(e=>{let t=e.test(r);return(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs ".concat(t?"text-green-400":"text-gray-500"),children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-xs ".concat(t?"bg-green-500 text-white":"bg-gray-600 text-gray-400"),children:"✓"}),(0,s.jsx)("span",{children:e.text})]},e.id)})})]})]})}},84929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(95155);Object.defineProperty(t,"__esModule",{value:!0});let a=r(35695),l=function(e){return e&&e.__esModule?e:{default:e}}(r(12115));t.default=e=>{let{message:t,showContinueButton:r,handleTimeout:o,url:n,tempState:i}=e,d=(0,a.useRouter)(),[c,u]=l.default.useState(!0);return c?(0,s.jsx)("div",{id:"success-popup",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 text-primary rounded-2xl p-8 max-w-md w-full relative shadow-lg",children:[(0,s.jsx)("button",{onClick:()=>{u(!1),o&&o()},className:"absolute top-3 right-4 text-2xl text-white hover:text-red-400",children:"\xd7"}),(0,s.jsxs)("div",{className:"flex flex-col items-center success-popup",children:[(0,s.jsx)("div",{className:"w-16 h-16 flex items-center justify-center rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white text-3xl mb-4",children:"✓"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-white",children:"Success!"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 text-center",children:t})]}),(0,s.jsxs)("svg",{className:"w-16 h-16 mt-6 mx-auto text-green-500",viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("circle",{cx:"26",cy:"26",r:"25",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M14.1 27.2l7.1 7.2 16.7-16.8",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),r&&(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("button",{className:"bg-gradient-to-r from-green-500 to-green-600 px-6 py-3 rounded-lg text-white font-semibold hover:shadow-lg transition",onClick:()=>{o&&o();let e=n?i?"".concat(n,"?tempState=").concat(encodeURIComponent(i)):n:"/";d.push(e)},children:"Continue"})})]})}):null}},88985:(e,t,r)=>{Promise.resolve().then(r.bind(r,18041))},97007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(95155);var a=Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]},l=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},o=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var s=e(t),o=0;o<s.length;o++)"default"!==s[o]&&a(r,t,s[o]);return l(r,t),r}}();Object.defineProperty(t,"__esModule",{value:!0});let n=o(r(12115));t.default=e=>{let{message:t,handleTimeout:r,handleSendResetLink:a}=e,[l,o]=(0,n.useState)(!0),i=()=>{o(!1),r&&r()};return l?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-[#161b22] w-[90%] max-w-md rounded-2xl p-6 shadow-lg relative",children:[(0,s.jsx)("button",{onClick:i,className:"absolute top-4 right-4 text-white text-2xl hover:text-red-500",children:"\xd7"}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-red-600 to-red-500 text-white text-2xl mb-4",children:"!"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Message Failed"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:t})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsx)("button",{onClick:i,className:"px-6 py-2 rounded-lg border border-gray-600 text-white bg-[#0d1117] hover:bg-[#1a1f2b] transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:a,className:"px-6 py-2 rounded-lg text-white bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 shadow-md hover:shadow-lg transition",children:"Retry"})]})]})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[547,441,684,358],()=>t(88985)),_N_E=e.O()}]);